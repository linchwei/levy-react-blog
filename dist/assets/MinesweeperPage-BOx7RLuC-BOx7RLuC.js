import{j as e,m as g,A as k}from"./ui-DMLkXmeO-DMLkXmeO.js";import{r as h}from"./vendor-QyoG3HE1-QyoG3HE1.js";import{f as T,C as D,b as R,h as G,a as L,B as y}from"./index-BpIHfUOh-BpIHfUOh.js";import{B as I}from"./badge-D0Abl3GT-D0Abl3GT.js";import{B as w}from"./bomb-Cc0FOlyh-Cc0FOlyh.js";import{C as B}from"./clock-CWNBh-Kq-CWNBh-Kq.js";import{R as F}from"./rotate-ccw-DPybPW4P-DPybPW4P.js";import{N as _}from"./Navigation-DQqdpwUP-DQqdpwUP.js";import{F as P}from"./Footer-T5q_NybG-T5q_NybG.js";import{G as Y}from"./gamepad-2-D2_s5KJ2-D2_s5KJ2.js";import{B as U}from"./brain-ByqJu501-ByqJu501.js";import{T as $}from"./target-joGyb0qE-joGyb0qE.js";import"./animation-CTLyM_LX-CTLyM_LX.js";import"./input-BdOFr_dr-BdOFr_dr.js";import"./middleware-BDn-In8F-BDn-In8F.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Q=T("flag",V),j={EASY:{rows:9,cols:9,mineCount:10},MEDIUM:{rows:16,cols:16,mineCount:40},HARD:{rows:16,cols:30,mineCount:99}};function W(t,n){return Array.from({length:t},(s,l)=>Array.from({length:n},(r,d)=>({isMine:!1,neighborMines:0,state:"CLOSED",row:l,col:d})))}function q(t,n,s,l){const r=t.map(i=>i.map(o=>({...o}))),d=r.length,m=r[0].length;let c=0;for(;c<n;){const i=Math.floor(Math.random()*d),o=Math.floor(Math.random()*m),u=Math.abs(i-s)<=1&&Math.abs(o-l)<=1;!r[i][o].isMine&&!u&&(r[i][o].isMine=!0,c++)}for(let i=0;i<d;i++)for(let o=0;o<m;o++)r[i][o].isMine||(r[i][o].neighborMines=z(r,i,o));return r}function z(t,n,s){const l=t.length,r=t[0].length;let d=0;for(let m=-1;m<=1;m++)for(let c=-1;c<=1;c++){if(m===0&&c===0)continue;const i=n+m,o=s+c;i>=0&&i<l&&o>=0&&o<r&&t[i][o].isMine&&d++}return d}function C(t="EASY"){const n=j[t];return{board:W(n.rows,n.cols),status:"IDLE",rows:n.rows,cols:n.cols,mineCount:n.mineCount,flagCount:0,time:0,firstClick:!0,bestTime:parseInt(localStorage.getItem(`minesweeperBestTime_${t}`)||"0")}}function E(t,n,s){if(t.status==="WON"||t.status==="GAME_OVER")return t;const l=t.board[n][s];if(l.state!=="CLOSED"&&l.state!=="QUESTION")return t;let r=t.board.map(c=>c.map(i=>({...i}))),d=t.status,m=t.firstClick;if(t.firstClick&&(r=q(r,t.mineCount,n,s),m=!1,d="PLAYING"),r=v(r,n,s),r[n][s].isMine)d="GAME_OVER",r=H(r);else if(X(r)){d="WON";const c=t.bestTime===0||t.time<t.bestTime?t.time:t.bestTime;localStorage.setItem(`minesweeperBestTime_${M(t)}`,c.toString())}return{...t,board:r,status:d,firstClick:m,bestTime:d==="WON"?Math.min(t.bestTime||1/0,t.time):t.bestTime}}function v(t,n,s){const l=t.map(d=>d.map(m=>({...m}))),r=l[n][s];if(r.state!=="CLOSED"&&r.state!=="QUESTION")return l;if(r.state="OPEN",r.neighborMines===0&&!r.isMine){const d=l.length,m=l[0].length;for(let c=-1;c<=1;c++)for(let i=-1;i<=1;i++){if(c===0&&i===0)continue;const o=n+c,u=s+i;if(o>=0&&o<d&&u>=0&&u<m&&(l[o][u].state==="CLOSED"||l[o][u].state==="QUESTION"))return v(l,o,u)}}return l}function H(t){return t.map(n=>n.map(s=>s.isMine?{...s,state:"OPEN"}:s))}function J(t,n,s){if(t.status==="WON"||t.status==="GAME_OVER")return t;const l=t.board[n][s];if(l.state==="OPEN")return t;const r=t.board.map(m=>m.map(c=>({...c})));let d=t.flagCount;return l.state==="CLOSED"?(r[n][s].state="FLAGGED",d++):l.state==="FLAGGED"?(r[n][s].state="QUESTION",d--):l.state==="QUESTION"&&(r[n][s].state="CLOSED"),{...t,board:r,flagCount:d}}function K(t,n,s){const l=t.board[n][s];if(l.state!=="OPEN"||l.neighborMines===0)return t;const r=t.board.length,d=t.board[0].length;let m=0;for(let c=-1;c<=1;c++)for(let i=-1;i<=1;i++){if(c===0&&i===0)continue;const o=n+c,u=s+i;o>=0&&o<r&&u>=0&&u<d&&t.board[o][u].state==="FLAGGED"&&m++}if(m===l.neighborMines){let c={...t};for(let i=-1;i<=1;i++)for(let o=-1;o<=1;o++){if(i===0&&o===0)continue;const u=n+i,p=s+o;u>=0&&u<r&&p>=0&&p<d&&t.board[u][p].state!=="FLAGGED"&&(c=E(c,u,p))}return c}return t}function X(t){for(const n of t)for(const s of n)if(!s.isMine&&s.state!=="OPEN")return!1;return!0}function Z(t){return t.status!=="PLAYING"?t:{...t,time:t.time+1}}function ee(t){return C(M(t))}function te(t,n){return C(n)}function M(t){for(const[n,s]of Object.entries(j))if(s.rows===t.rows&&s.cols===t.cols&&s.mineCount===t.mineCount)return n;return"EASY"}const se={1:"text-blue-500",2:"text-green-500",3:"text-red-500",4:"text-purple-500",5:"text-orange-500",6:"text-cyan-500",7:"text-black dark:text-white",8:"text-gray-500"};function ne({onWin:t,onGameOver:n}){const[s,l]=h.useState(()=>C("EASY")),[r,d]=h.useState("EASY"),m=h.useRef(null);h.useEffect(()=>(s.status==="PLAYING"?m.current=setInterval(()=>{l(a=>Z(a))},1e3):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&clearInterval(m.current)}),[s.status]),h.useEffect(()=>{s.status==="WON"?t==null||t(s.time):s.status==="GAME_OVER"&&(n==null||n())},[s.status,s.time,t,n]);const c=h.useCallback((a,x)=>{l(f=>E(f,a,x))},[]),i=h.useCallback((a,x,f)=>{a.preventDefault(),l(b=>J(b,x,f))},[]),o=h.useCallback((a,x)=>{l(f=>K(f,a,x))},[]),u=()=>{l(a=>ee(a))},p=a=>{d(a),l(te(s,a))},N=a=>{const x=Math.floor(a/60),f=a%60;return`${x.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`},S=a=>{if(a.state==="FLAGGED")return e.jsx(Q,{className:"w-4 h-4 text-red-500"});if(a.state==="QUESTION")return e.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"?"});if(a.state==="OPEN"){if(a.isMine)return e.jsx(w,{className:"w-4 h-4 text-red-600"});if(a.neighborMines>0)return e.jsx("span",{className:`text-sm font-bold ${se[a.neighborMines]}`,children:a.neighborMines})}return null},O=a=>a.state==="OPEN"?a.isMine?"bg-red-500/20 border-red-500":"bg-muted/50 border-border":"bg-background hover:bg-muted/80 border-border cursor-pointer";return e.jsxs(D,{className:"w-full max-w-fit mx-auto",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between",children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ’£"}),"æ‰«é›·"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(I,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"}),s.mineCount-s.flagCount]})})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 justify-center",children:[e.jsx(B,{className:"w-3 h-3"}),"æ—¶é—´"]}),e.jsx("p",{className:"text-2xl font-bold font-mono",children:N(s.time)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"çŠ¶æ€"}),e.jsx("p",{className:"text-2xl font-bold",children:s.status==="WON"?"ğŸ˜":s.status==="GAME_OVER"?"ğŸ˜µ":"ğŸ˜Š"})]}),s.bestTime>0&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"æœ€ä½³"}),e.jsx("p",{className:"text-2xl font-bold font-mono",children:N(s.bestTime)})]})]}),e.jsx("div",{className:"flex justify-center gap-2",children:Object.keys(j).map(a=>e.jsx(y,{variant:r===a?"default":"outline",size:"sm",onClick:()=>p(a),disabled:s.status==="PLAYING",children:a==="EASY"?"ç®€å•":a==="MEDIUM"?"ä¸­ç­‰":"å›°éš¾"},a))}),e.jsx("div",{className:"flex justify-center",children:e.jsx(g.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"inline-block",children:e.jsx("div",{className:"grid gap-0.5 p-2 bg-muted rounded-lg",style:{gridTemplateColumns:`repeat(${s.cols}, minmax(0, 1fr))`},children:s.board.map((a,x)=>a.map((f,b)=>e.jsx(g.div,{initial:f.state==="OPEN"?{scale:.8}:!1,animate:{scale:1},transition:{duration:.1},onClick:()=>c(x,b),onContextMenu:A=>i(A,x,b),onDoubleClick:()=>o(x,b),className:`
                      w-8 h-8 flex items-center justify-center
                      border rounded-sm text-sm font-bold
                      transition-all duration-150
                      select-none
                      ${O(f)}
                    `,children:S(f)},`${x}-${b}`)))})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(y,{onClick:u,variant:"outline",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"æ–°æ¸¸æˆ"]})}),e.jsxs(k,{children:[s.status==="WON"&&e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-center p-4 bg-green-500/10 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-green-500",children:"ğŸ‰ æ­å–œè·èƒœï¼"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ç”¨æ—¶: ",N(s.time),s.bestTime===s.time&&" (æ–°çºªå½•!)"]})]}),s.status==="GAME_OVER"&&e.jsxs(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-center p-4 bg-red-500/10 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-red-500",children:"ğŸ’¥ æ¸¸æˆç»“æŸ"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"è¸©åˆ°åœ°é›·äº†ï¼Œå†è¯•ä¸€æ¬¡å§ï¼"})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground text-center",children:e.jsx("p",{children:"å·¦é”®æ­å¼€ | å³é”®æ ‡è®° | åŒå‡»å¿«é€Ÿæ­å¼€"})})]})]})}function Ne(){return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(_,{}),e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex-1 pt-16",children:[e.jsxs("section",{className:"relative py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-to-b from-gray-500/5 to-transparent rounded-full blur-3xl"})}),e.jsxs("div",{className:"relative max-w-7xl mx-auto text-center",children:[e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-500/10 mb-6",children:e.jsx(Y,{className:"w-8 h-8 text-gray-500"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold tracking-tight mb-4",children:e.jsx("span",{className:"bg-gradient-to-r from-gray-500 to-slate-500 bg-clip-text text-transparent",children:"æ‰«é›·"})}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"ç»å…¸Windowsæ¸¸æˆï¼Œé€šè¿‡é€»è¾‘æ¨ç†æ‰¾å‡ºæ‰€æœ‰éšè—çš„åœ°é›·ï¼"})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-8 flex justify-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"é€»è¾‘æ¨ç†"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{children:"ä¸‰ç§éš¾åº¦"})]})]})]})]}),e.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(ne,{})})}),e.jsx("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-muted/30",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"æ¸¸æˆæŠ€å·§"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ¯"}),e.jsx("h3",{className:"font-semibold mb-2",children:"ä»è§’è½å¼€å§‹"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ä»è§’è½æˆ–è¾¹ç¼˜å¼€å§‹æ­å¼€ï¼Œæ›´å®¹æ˜“æ‰¾åˆ°å®‰å…¨åŒºåŸŸ"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸš©"}),e.jsx("h3",{className:"font-semibold mb-2",children:"å–„ç”¨æ ‡è®°"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"å³é”®æ ‡è®°ç¡®å®šçš„åœ°é›·ä½ç½®ï¼Œé¿å…è¯¯è§¦"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"âš¡"}),e.jsx("h3",{className:"font-semibold mb-2",children:"åŒå‡»å¿«é€Ÿæ­å¼€"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"å½“æ ‡è®°æ•°é‡ç­‰äºæ•°å­—æ—¶ï¼ŒåŒå‡»å¯å¿«é€Ÿæ­å¼€å‘¨å›´æ ¼å­"})]})]})]})})]}),e.jsx(P,{})]})}export{Ne as MinesweeperPage};
//# sourceMappingURL=MinesweeperPage-BOx7RLuC-BOx7RLuC.js.map
