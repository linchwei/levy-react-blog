import{j as e,m as d,A as N}from"./ui-DMLkXmeO-DMLkXmeO.js";import{r as h}from"./vendor-QyoG3HE1-QyoG3HE1.js";import{C,b as w,h as E,a as P,B as u,S}from"./index-BpIHfUOh-BpIHfUOh.js";import{B as k}from"./badge-D0Abl3GT-D0Abl3GT.js";import{T as A}from"./trophy-YNNFdYRL-YNNFdYRL.js";import{C as I}from"./clock-CWNBh-Kq-CWNBh-Kq.js";import{M}from"./move-CmY1lDe--CmY1lDe-.js";import{P as b}from"./play-C2p6qgis-C2p6qgis.js";import{R as v}from"./rotate-ccw-DPybPW4P-DPybPW4P.js";import{N as L}from"./Navigation-DQqdpwUP-DQqdpwUP.js";import{F as z}from"./Footer-T5q_NybG-T5q_NybG.js";import{G}from"./gamepad-2-D2_s5KJ2-D2_s5KJ2.js";import{B as Y}from"./brain-ByqJu501-ByqJu501.js";import"./animation-CTLyM_LX-CTLyM_LX.js";import"./input-BdOFr_dr-BdOFr_dr.js";import"./middleware-BDn-In8F-BDn-In8F.js";const D={rows:4,cols:4},R=["ğŸ¶","ğŸ±","ğŸ­","ğŸ¹","ğŸ°","ğŸ¦Š","ğŸ»","ğŸ¼","ğŸ¨","ğŸ¯","ğŸ¦","ğŸ®","ğŸ·","ğŸ¸","ğŸµ","ğŸ”","ğŸ§","ğŸ¦","ğŸ¤","ğŸ¦†","ğŸ¦…","ğŸ¦‰","ğŸ¦‡","ğŸº","ğŸ—","ğŸ´","ğŸ¦„","ğŸ","ğŸ›","ğŸ¦‹","ğŸŒ","ğŸ"];function T(){return Math.random().toString(36).substr(2,9)}function O(s){const r=[...s];for(let t=r.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[r[t],r[i]]=[r[i],r[t]]}return r}function $(s){const r=R.slice(0,s),t=[...r,...r];return O(t).map((n,o)=>({id:`card-${o}-${T()}`,value:n,status:"CLOSED"}))}function j(s=D){const t=s.rows*s.cols/2;return{cards:$(t),flippedCards:[],matchedPairs:0,totalPairs:t,moves:0,score:0,time:0,status:"IDLE",gridSize:{rows:s.rows,cols:s.cols}}}function B(s,r){if(s.status!=="PLAYING")return s;const t=s.cards.find(n=>n.id===r);if(!t||t.status==="MATCHED"||t.status==="OPEN"||s.flippedCards.length>=2)return s;const i=s.cards.map(n=>n.id===r?{...n,status:"OPEN"}:n);return{...s,cards:i,flippedCards:[...s.flippedCards,r]}}function _(s){if(s.flippedCards.length!==2)return s;const[r,t]=s.flippedCards,i=s.cards.find(l=>l.id===r),n=s.cards.find(l=>l.id===t);if(!i||!n)return s;const o=s.moves+1;if(i.value===n.value){const l=s.cards.map(p=>p.id===r||p.id===t?{...p,status:"MATCHED"}:p),c=s.matchedPairs+1,f=s.score+100+Math.max(0,20-o)*5;return c===s.totalPairs?{...s,cards:l,flippedCards:[],matchedPairs:c,moves:o,score:f,status:"GAME_OVER"}:{...s,cards:l,flippedCards:[],matchedPairs:c,moves:o,score:f}}else{const l=s.cards.map(c=>c.id===r||c.id===t?{...c,status:"CLOSED"}:c);return{...s,cards:l,flippedCards:[],moves:o}}}function H(s){return s.status==="PLAYING"?s:s.status==="GAME_OVER"?{...j(s.gridSize),status:"PLAYING"}:{...s,status:"PLAYING"}}function V(s){return{...j(s.gridSize)}}function F(s,r){return{...s,time:r}}function q({onScoreChange:s,onGameOver:r}){const[t,i]=h.useState(()=>j()),[n,o]=h.useState(!1),l=h.useRef(null);h.useEffect(()=>(t.status==="PLAYING"?l.current=setInterval(()=>{i(a=>F(a,a.time+1))},1e3):l.current&&(clearInterval(l.current),l.current=null),()=>{l.current&&clearInterval(l.current)}),[t.status]);const c=h.useCallback(a=>{n||t.status!=="PLAYING"||i(m=>B(m,a))},[n,t.status]);h.useEffect(()=>{if(t.flippedCards.length===2){o(!0);const a=setTimeout(()=>{i(m=>{const x=_(m);return x.score!==m.score&&(s==null||s(x.score)),x.status==="GAME_OVER"&&m.status!=="GAME_OVER"&&(r==null||r(x.score)),x}),o(!1)},1e3);return()=>clearTimeout(a)}},[t.flippedCards,s,r]);const f=()=>{i(a=>H(a))},p=()=>{i(a=>V(a))},g=a=>{const m=Math.floor(a/60),x=a%60;return`${m.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`},y=a=>{switch(a){case"MATCHED":return"bg-green-500/20 border-green-500";case"OPEN":return"bg-purple-500/20 border-purple-500";default:return"bg-muted hover:bg-muted/80 border-border"}};return e.jsxs(C,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸƒ"}),"è®°å¿†ç¿»ç‰Œ"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(k,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),t.gridSize.rows,"x",t.gridSize.cols]})})]}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 justify-center",children:[e.jsx(I,{className:"w-3 h-3"}),"æ—¶é—´"]}),e.jsx("p",{className:"text-2xl font-bold",children:g(t.time)})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 justify-center",children:[e.jsx(M,{className:"w-3 h-3"}),"æ­¥æ•°"]}),e.jsx("p",{className:"text-2xl font-bold",children:t.moves})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"è¿›åº¦"}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.matchedPairs,"/",t.totalPairs]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative",children:[e.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${t.gridSize.cols}, minmax(0, 1fr))`},children:t.cards.map((a,m)=>e.jsx(d.div,{initial:{scale:0,rotateY:180},animate:{scale:1,rotateY:a.status==="CLOSED"?180:0},transition:{scale:{duration:.3,delay:m*.05},rotateY:{duration:.3}},onClick:()=>c(a.id),className:`
                    w-16 h-16 sm:w-20 sm:h-20 rounded-xl cursor-pointer
                    flex items-center justify-center text-3xl sm:text-4xl
                    border-2 transition-all duration-300
                    ${y(a.status)}
                    ${a.status==="CLOSED"?"hover:scale-105":""}
                    ${a.status==="MATCHED"?"cursor-default":""}
                  `,style:{perspective:"1000px"},children:e.jsx(N,{mode:"wait",children:a.status!=="CLOSED"?e.jsx(d.span,{initial:{opacity:0,rotateY:180},animate:{opacity:1,rotateY:0},exit:{opacity:0,rotateY:-180},transition:{duration:.2},children:a.value},"front"):e.jsx(d.div,{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl text-muted-foreground",children:"?"})},"back")})},a.id))}),e.jsx(N,{children:t.status==="IDLE"&&e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center bg-background/90 rounded-lg",children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:"å‡†å¤‡å¥½äº†å—ï¼Ÿ"}),e.jsxs(u,{onClick:f,size:"lg",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"å¼€å§‹æ¸¸æˆ"]})]})}),e.jsx(N,{children:t.status==="GAME_OVER"&&e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center bg-background/90 rounded-lg",children:[e.jsx(d.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"text-4xl mb-2",children:"ğŸ‰"}),e.jsx("p",{className:"text-2xl font-bold text-green-500 mb-2",children:"æ­å–œå®Œæˆï¼"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("p",{className:"text-lg",children:["ç”¨æ—¶: ",g(t.time)]}),e.jsxs("p",{className:"text-lg",children:["æ­¥æ•°: ",t.moves]}),e.jsxs("p",{className:"text-lg font-bold",children:["å¾—åˆ†: ",t.score]})]}),e.jsxs(u,{onClick:f,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"å†æ¥ä¸€å±€"]})]})})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[t.status==="IDLE"&&e.jsxs(u,{onClick:f,size:"lg",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"å¼€å§‹æ¸¸æˆ"]}),e.jsxs(u,{variant:"outline",onClick:p,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"æ–°æ¸¸æˆ"]})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(u,{variant:t.gridSize.rows===4?"default":"outline",size:"sm",onClick:()=>i(j({rows:4,cols:4})),disabled:t.status==="PLAYING",children:"ç®€å• (4x4)"}),e.jsx(u,{variant:t.gridSize.rows===6?"default":"outline",size:"sm",onClick:()=>i(j({rows:6,cols:6})),disabled:t.status==="PLAYING",children:"ä¸­ç­‰ (6x6)"}),e.jsx(u,{variant:t.gridSize.rows===8?"default":"outline",size:"sm",onClick:()=>i(j({rows:8,cols:8})),disabled:t.status==="PLAYING",children:"å›°éš¾ (8x8)"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[e.jsx("p",{children:"ç‚¹å‡»å¡ç‰‡ç¿»è½¬ï¼Œæ‰¾å‡ºç›¸åŒçš„é…å¯¹"}),e.jsx("p",{className:"mt-1",children:"å°½é‡ç”¨æœ€å°‘çš„æ­¥æ•°å®Œæˆæ¸¸æˆ"})]})]})]})}function de(){return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(L,{}),e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex-1 pt-16",children:[e.jsxs("section",{className:"relative py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-to-b from-purple-500/5 to-transparent rounded-full blur-3xl"})}),e.jsxs("div",{className:"relative max-w-7xl mx-auto text-center",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-purple-500/10 mb-6",children:e.jsx(G,{className:"w-8 h-8 text-purple-500"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold tracking-tight mb-4",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"è®°å¿†ç¿»ç‰Œ"})}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"ç¿»è½¬å¡ç‰‡ï¼Œæ‰¾å‡ºç›¸åŒçš„é…å¯¹ï¼ŒæŒ‘æˆ˜ä½ çš„è®°å¿†åŠ›ï¼"})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-8 flex justify-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Y,{className:"w-5 h-5"}),e.jsx("span",{children:"é”»ç‚¼è®°å¿†åŠ›"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"ä¸‰ç§éš¾åº¦å¯é€‰"})]})]})]})]}),e.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(q,{})})}),e.jsx("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-muted/30",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"æ¸¸æˆæŠ€å·§"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ¯"}),e.jsx("h3",{className:"font-semibold mb-2",children:"ä¸“æ³¨è§‚å¯Ÿ"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"æ¯æ¬¡ç¿»ç‰Œéƒ½è¦è®°ä½ä½ç½®å’Œå›¾æ¡ˆï¼Œå»ºç«‹è®°å¿†å…³è”"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"âš¡"}),e.jsx("h3",{className:"font-semibold mb-2",children:"å¾ªåºæ¸è¿›"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ä»ç®€å•éš¾åº¦å¼€å§‹ï¼Œé€æ­¥æŒ‘æˆ˜æ›´é«˜éš¾åº¦"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ§ "}),e.jsx("h3",{className:"font-semibold mb-2",children:"è®°å¿†ç­–ç•¥"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ä½¿ç”¨ä½ç½®è®°å¿†æ³•ï¼Œå°†å¡ç‰‡ä½ç½®ä¸å›¾æ¡ˆè”ç³»èµ·æ¥"})]})]})]})})]}),e.jsx(z,{})]})}export{de as MemoryPage};
//# sourceMappingURL=MemoryPage-DjvJHzmX-DjvJHzmX.js.map
