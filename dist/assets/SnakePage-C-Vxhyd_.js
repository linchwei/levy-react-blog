import{j as e,m as N}from"./ui-DYkYaoix.js";import{r as f}from"./vendor-QyoG3HE1.js";import{C as F,b as B,h as U,a as V,B as g}from"./index-DeSSmPMO.js";import{B as z}from"./badge-BB4iipK0.js";import{S as O}from"./slider-DYH6-y4P.js";import{T as L}from"./trophy-HywIcslr.js";import{P}from"./play-CTEUZwdb.js";import{R as I}from"./rotate-ccw-dbeTAKAN.js";import{Z as _}from"./zap-D92GgexC.js";import{P as $}from"./pause-Ha661Iio.js";import{N as X}from"./Navigation-DSaOLIRN.js";import{F as Z}from"./Footer-CIleRj_M.js";import{G as K}from"./gamepad-2-DeiXWaNR.js";import{T as q}from"./target-BDzvMoBS.js";import"./animation-BjUy5Qx7.js";import"./index-BdQq_4o_.js";import"./index-DKsI43ti.js";import"./index-CwgND_Yd.js";import"./input-DjkIl-os.js";import"./middleware-DopGOoqf.js";const m={gridWidth:20,gridHeight:20,initialSpeed:150,speedIncrement:5,maxSpeed:50};function b(){return Math.random().toString(36).substr(2,9)}function A(s=m){const a=Math.floor(s.gridWidth/2),l=Math.floor(s.gridHeight/2),r=[{x:a,y:l,id:b()},{x:a-1,y:l,id:b()},{x:a-2,y:l,id:b()}];return{snake:r,food:D(r,s),direction:"RIGHT",nextDirection:"RIGHT",status:"IDLE",score:0,highScore:parseInt(localStorage.getItem("snakeHighScore")||"0"),speed:s.initialSpeed,baseSpeed:s.initialSpeed}}function D(s,a=m){const l=new Set(s.map(n=>`${n.x},${n.y}`));let r,i;do r=Math.floor(Math.random()*a.gridWidth),i=Math.floor(Math.random()*a.gridHeight);while(l.has(`${r},${i}`));const o=Math.random()<.1;return{x:r,y:i,id:b(),type:o?"SPECIAL":"NORMAL",value:o?20:10}}function J(s,a){return{UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"}[s]!==a}function Q(s,a){const r={UP:{x:0,y:-1},DOWN:{x:0,y:1},LEFT:{x:-1,y:0},RIGHT:{x:1,y:0}}[a];return{x:s.x+r.x,y:s.y+r.y}}function ee(s,a,l=m){return s.x<0||s.x>=l.gridWidth||s.y<0||s.y>=l.gridHeight?!0:a.slice(0,-1).some(i=>i.x===s.x&&i.y===s.y)}function se(s,a){return s.x===a.x&&s.y===a.y}function T(s,a,l=m){const r=Math.floor(s/50)*l.speedIncrement,i=a-r;return Math.max(i,l.maxSpeed)}function te(s,a){return{...s,baseSpeed:a,speed:T(s.score,a)}}function re(s,a=m){if(s.status!=="PLAYING")return s;const l=s.nextDirection,r=Q(s.snake[0],l);if(ee(r,s.snake,a)){const j=Math.max(s.score,s.highScore);return localStorage.setItem("snakeHighScore",j.toString()),{...s,status:"GAME_OVER",highScore:j}}const i={...r,id:b()},o=[i,...s.snake];let n=s.food,u=s.score,h=s.speed;return se(i,s.food)?(u+=s.food.value,h=T(u,s.baseSpeed,a),n=D(o,a)):o.pop(),{...s,snake:o,food:n,direction:l,score:u,speed:h}}function y(s,a){return s.status!=="PLAYING"||!J(s.direction,a)?s:{...s,nextDirection:a}}function ae(s){return s.status==="PLAYING"?s:s.status==="GAME_OVER"?{...A(),status:"PLAYING",highScore:s.highScore}:{...s,status:"PLAYING"}}function ie(s){return s.status!=="PLAYING"?s:{...s,status:"PAUSED"}}function ne(s){return s.status!=="PAUSED"?s:{...s,status:"PLAYING"}}function R(s){return{...A(),highScore:s.highScore}}function G(s){return s.status==="PLAYING"?ie(s):s.status==="PAUSED"?ne(s):s}function le({onScoreChange:s,onGameOver:a}){const l=f.useRef(null),[r,i]=f.useState(()=>A()),o=f.useRef(null),n=20,u=m.gridWidth*n,h=m.gridHeight*n,j=f.useCallback(()=>{const c=l.current;if(!c)return;const t=c.getContext("2d");if(!t)return;t.fillStyle="#1a1a2e",t.fillRect(0,0,u,h),t.strokeStyle="#2d2d44",t.lineWidth=1;for(let x=0;x<=m.gridWidth;x++)t.beginPath(),t.moveTo(x*n,0),t.lineTo(x*n,h),t.stroke();for(let x=0;x<=m.gridHeight;x++)t.beginPath(),t.moveTo(0,x*n),t.lineTo(u,x*n),t.stroke();r.snake.forEach((x,v)=>{const S=x.x*n,k=x.y*n;if(v===0)t.fillStyle="#4ade80",t.shadowColor="#4ade80",t.shadowBlur=10;else{const p=(1-v/r.snake.length)*.5+.3;t.fillStyle=`rgba(74, 222, 128, ${p})`,t.shadowBlur=0}if(t.fillRect(S+1,k+1,n-2,n-2),v===0){t.fillStyle="#1a1a2e",t.shadowBlur=0;const p=3;t.fillRect(S+5,k+5,p,p),t.fillRect(S+12,k+5,p,p)}});const d=r.food.x*n,H=r.food.y*n;r.food.type==="SPECIAL"?(t.fillStyle="#fbbf24",t.shadowColor="#fbbf24",t.shadowBlur=15):(t.fillStyle="#f87171",t.shadowColor="#f87171",t.shadowBlur=10);const C=d+n/2,W=H+n/2,Y=n/2-2;t.beginPath(),t.arc(C,W,Y,0,Math.PI*2),t.fill(),t.shadowBlur=0},[r,u,h]);f.useEffect(()=>(r.status==="PLAYING"?o.current=setInterval(()=>{i(c=>{const t=re(c);return t.status==="GAME_OVER"&&c.status!=="GAME_OVER"&&(a==null||a(t.score)),t.score!==c.score&&(s==null||s(t.score)),t})},r.speed):o.current&&(clearInterval(o.current),o.current=null),()=>{o.current&&clearInterval(o.current)}),[r.status,r.speed,s,a]),f.useEffect(()=>{j()},[j]),f.useEffect(()=>{const c=t=>{switch(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(t.key)&&t.preventDefault(),t.key){case"ArrowUp":case"w":case"W":i(d=>y(d,"UP"));break;case"ArrowDown":case"s":case"S":i(d=>y(d,"DOWN"));break;case"ArrowLeft":case"a":case"A":i(d=>y(d,"LEFT"));break;case"ArrowRight":case"d":case"D":i(d=>y(d,"RIGHT"));break;case" ":i(d=>G(d));break;case"r":case"R":i(d=>R(d));break}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]);const w=()=>{i(c=>ae(c))},M=()=>{i(c=>R(c))},E=()=>{i(c=>G(c))};return e.jsxs(F,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(B,{className:"flex flex-row items-center justify-between",children:[e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ"}),"è´ªåƒè›‡"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(z,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),"æœ€é«˜åˆ†: ",r.highScore]})})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsx("div",{className:"relative flex justify-center",children:e.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative",children:[e.jsx("canvas",{ref:l,width:u,height:h,className:"border-2 border-border rounded-lg cursor-pointer",style:{imageRendering:"pixelated"}}),r.status!=="PLAYING"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center bg-background/80 rounded-lg",children:[r.status==="IDLE"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:"å‡†å¤‡å¥½äº†å—ï¼Ÿ"}),e.jsxs(g,{onClick:w,size:"lg",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"å¼€å§‹æ¸¸æˆ"]})]}),r.status==="PAUSED"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:"æ¸¸æˆæš‚åœ"}),e.jsxs(g,{onClick:E,size:"lg",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"ç»§ç»­æ¸¸æˆ"]})]}),r.status==="GAME_OVER"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold text-destructive mb-2",children:"æ¸¸æˆç»“æŸ"}),e.jsxs("p",{className:"text-lg mb-4",children:["æœ€ç»ˆå¾—åˆ†: ",r.score]}),e.jsxs(g,{onClick:w,size:"lg",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"å†æ¥ä¸€å±€"]})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:"æ¸¸æˆé€Ÿåº¦"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r.baseSpeed<=80?"æå¿«":r.baseSpeed<=120?"å¿«":r.baseSpeed<=180?"æ­£å¸¸":"æ…¢"})]}),e.jsx(O,{value:[r.baseSpeed],onValueChange:([c])=>i(t=>te(t,c)),min:50,max:250,step:10,disabled:r.status==="PLAYING",className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"å¿«"}),e.jsx("span",{children:"æ…¢"})]}),r.status==="PLAYING"&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"æ¸¸æˆè¿›è¡Œä¸­æ— æ³•è°ƒæ•´é€Ÿåº¦"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"å½“å‰åˆ†æ•°"}),e.jsx("p",{className:"text-2xl font-bold",children:r.score})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"é€Ÿåº¦ç­‰çº§"}),e.jsx("p",{className:"text-2xl font-bold",children:Math.round((250-r.speed)/10)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.status==="PLAYING"?e.jsxs(g,{variant:"outline",onClick:E,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"æš‚åœ"]}):e.jsxs(g,{onClick:w,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),r.status==="GAME_OVER"?"å†æ¥ä¸€å±€":"å¼€å§‹"]}),e.jsxs(g,{variant:"outline",onClick:M,children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"é‡ç½®"]})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground text-center",children:e.jsx("p",{children:"æ“ä½œ: â†‘â†“â†â†’ æˆ– WASD ç§»åŠ¨ | ç©ºæ ¼ æš‚åœ | R é‡ç½®"})})]})]})}function Ee(){return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(X,{}),e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex-1 pt-16",children:[e.jsxs("section",{className:"relative py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-to-b from-green-500/5 to-transparent rounded-full blur-3xl"})}),e.jsxs("div",{className:"relative max-w-7xl mx-auto text-center",children:[e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-500/10 mb-6",children:e.jsx(K,{className:"w-8 h-8 text-green-500"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold tracking-tight mb-4",children:e.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-500 bg-clip-text text-transparent",children:"è´ªåƒè›‡"})}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"ç»å…¸è¡—æœºæ¸¸æˆï¼Œæ§åˆ¶è›‡åƒé£Ÿç‰©æˆé•¿ï¼Œä¸è¦æ’å¢™æˆ–å’¬åˆ°è‡ªå·±ï¼"})]}),e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-8 flex justify-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{children:"ç›®æ ‡ï¼šå°½å¯èƒ½é«˜åˆ†"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"è®°å½•ä¿å­˜åœ¨æœ¬åœ°"})]})]})]})]}),e.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(le,{})})}),e.jsx("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-muted/30",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"æ¸¸æˆæŠ€å·§"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ¯"}),e.jsx("h3",{className:"font-semibold mb-2",children:"è§„åˆ’è·¯çº¿"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"æå‰è§„åˆ’å¥½ç§»åŠ¨è·¯çº¿ï¼Œé¿å…æŠŠè‡ªå·±é€¼å…¥æ­»è§’"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"âš¡"}),e.jsx("h3",{className:"font-semibold mb-2",children:"æ§åˆ¶é€Ÿåº¦"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"éšç€åˆ†æ•°å¢åŠ é€Ÿåº¦ä¼šå˜å¿«ï¼Œä¿æŒå†·é™ä¸“æ³¨"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ"}),e.jsx("h3",{className:"font-semibold mb-2",children:"ç‰¹æ®Šé£Ÿç‰©"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"é‡‘è‰²é£Ÿç‰©ä»·å€¼20åˆ†ï¼Œå‡ºç°æ—¶ä¼˜å…ˆè·å–"})]})]})]})})]}),e.jsx(Z,{})]})}export{Ee as SnakePage};
//# sourceMappingURL=SnakePage-C-Vxhyd_.js.map
