import{j as o,m as ct}from"./ui-GusFL0M-.js";import{r as P}from"./vendor-C6cl_Q97.js";import{S as Ae,Q as Le,V as S,O as he,P as fe,M as G,T as B,b as L,R as lt,d as Ze,e as dt,U as mt,f as ut,g as ht,h as ft,u as H,i as be,j as pt,B as bt,C as Ie,k as gt}from"./animation-XVdCpx6S.js";import{c as $,B as I,T as ze,n as xt,t as Z}from"./index-CWBEolnY.js";import{S as jt}from"./slider-E1AmHbU8.js";import{I as pe}from"./input-B0jA98LF.js";import{L as K}from"./label-tdbyazyo.js";import{T as yt,a as vt,b as Re,c as Fe}from"./tabs-DE38C0oM.js";import{S as Ye}from"./switch-CP4J1tak.js";import{S as wt,F as Pt}from"./save-Dd2uw_2b.js";import{E as Et}from"./eye-KEoT97Le.js";import{E as Nt}from"./eye-off-Ce7943FM.js";import{B as Ue}from"./box-CLBa-l0T.js";import{C as Mt}from"./circle-CSnLz8S8.js";import{_ as ae}from"./extends-CF3RwP-h.js";import"./index-BdQq_4o_.js";import"./index-qvmSPkCr.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5v14a9 3 0 0 0 18 0V5",key:"aqi0yr"}]],Ot=$("cylinder",Ct);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M20.5 10a2.5 2.5 0 0 1-2.4-3H18a2.95 2.95 0 0 1-2.6-4.4 10 10 0 1 0 6.3 7.1c-.3.2-.8.3-1.2.3",key:"19sr3x"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tt=$("donut",St);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],_t=$("maximize",kt);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],At=$("move",Dt);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],It=$("rotate-cw",Lt);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],Rt=$("triangle",zt);var Ft=Object.defineProperty,Yt=(r,a,u)=>a in r?Ft(r,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[a]=u,Ut=(r,a,u)=>(Yt(r,a+"",u),u);class Ht{constructor(){Ut(this,"_listeners")}addEventListener(a,u){this._listeners===void 0&&(this._listeners={});const e=this._listeners;e[a]===void 0&&(e[a]=[]),e[a].indexOf(u)===-1&&e[a].push(u)}hasEventListener(a,u){if(this._listeners===void 0)return!1;const e=this._listeners;return e[a]!==void 0&&e[a].indexOf(u)!==-1}removeEventListener(a,u){if(this._listeners===void 0)return;const h=this._listeners[a];if(h!==void 0){const b=h.indexOf(u);b!==-1&&h.splice(b,1)}}dispatchEvent(a){if(this._listeners===void 0)return;const e=this._listeners[a.type];if(e!==void 0){a.target=this;const h=e.slice(0);for(let b=0,v=h.length;b<v;b++)h[b].call(this,a);a.target=null}}}var Vt=Object.defineProperty,Zt=(r,a,u)=>a in r?Vt(r,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[a]=u,c=(r,a,u)=>(Zt(r,typeof a!="symbol"?a+"":a,u),u);const se=new lt,He=new Ze,Xt=Math.cos(70*(Math.PI/180)),Ve=(r,a)=>(r%a+a)%a;let Gt=class extends Ht{constructor(a,u){super(),c(this,"object"),c(this,"domElement"),c(this,"enabled",!0),c(this,"target",new S),c(this,"minDistance",0),c(this,"maxDistance",1/0),c(this,"minZoom",0),c(this,"maxZoom",1/0),c(this,"minPolarAngle",0),c(this,"maxPolarAngle",Math.PI),c(this,"minAzimuthAngle",-1/0),c(this,"maxAzimuthAngle",1/0),c(this,"enableDamping",!1),c(this,"dampingFactor",.05),c(this,"enableZoom",!0),c(this,"zoomSpeed",1),c(this,"enableRotate",!0),c(this,"rotateSpeed",1),c(this,"enablePan",!0),c(this,"panSpeed",1),c(this,"screenSpacePanning",!0),c(this,"keyPanSpeed",7),c(this,"zoomToCursor",!1),c(this,"autoRotate",!1),c(this,"autoRotateSpeed",2),c(this,"reverseOrbit",!1),c(this,"reverseHorizontalOrbit",!1),c(this,"reverseVerticalOrbit",!1),c(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),c(this,"mouseButtons",{LEFT:G.ROTATE,MIDDLE:G.DOLLY,RIGHT:G.PAN}),c(this,"touches",{ONE:B.ROTATE,TWO:B.DOLLY_PAN}),c(this,"target0"),c(this,"position0"),c(this,"zoom0"),c(this,"_domElementKeyEvents",null),c(this,"getPolarAngle"),c(this,"getAzimuthalAngle"),c(this,"setPolarAngle"),c(this,"setAzimuthalAngle"),c(this,"getDistance"),c(this,"getZoomScale"),c(this,"listenToKeyEvents"),c(this,"stopListenToKeyEvents"),c(this,"saveState"),c(this,"reset"),c(this,"update"),c(this,"connect"),c(this,"dispose"),c(this,"dollyIn"),c(this,"dollyOut"),c(this,"getScale"),c(this,"setScale"),this.object=a,this.domElement=u,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>y.phi,this.getAzimuthalAngle=()=>y.theta,this.setPolarAngle=t=>{let n=Ve(t,2*Math.PI),m=y.phi;m<0&&(m+=2*Math.PI),n<0&&(n+=2*Math.PI);let j=Math.abs(n-m);2*Math.PI-j<j&&(n<m?n+=2*Math.PI:m+=2*Math.PI),w.phi=n-m,e.update()},this.setAzimuthalAngle=t=>{let n=Ve(t,2*Math.PI),m=y.theta;m<0&&(m+=2*Math.PI),n<0&&(n+=2*Math.PI);let j=Math.abs(n-m);2*Math.PI-j<j&&(n<m?n+=2*Math.PI:m+=2*Math.PI),w.theta=n-m,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",me),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",me),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(h),e.update(),p=i.NONE},this.update=(()=>{const t=new S,n=new S(0,1,0),m=new Le().setFromUnitVectors(a.up,n),j=m.clone().invert(),N=new S,z=new Le,U=2*Math.PI;return function(){const De=e.object.position;m.setFromUnitVectors(a.up,n),j.copy(m).invert(),t.copy(De).sub(e.target),t.applyQuaternion(m),y.setFromVector3(t),e.autoRotate&&p===i.NONE&&ie(Xe()),e.enableDamping?(y.theta+=w.theta*e.dampingFactor,y.phi+=w.phi*e.dampingFactor):(y.theta+=w.theta,y.phi+=w.phi);let R=e.minAzimuthAngle,F=e.maxAzimuthAngle;isFinite(R)&&isFinite(F)&&(R<-Math.PI?R+=U:R>Math.PI&&(R-=U),F<-Math.PI?F+=U:F>Math.PI&&(F-=U),R<=F?y.theta=Math.max(R,Math.min(F,y.theta)):y.theta=y.theta>(R+F)/2?Math.max(R,y.theta):Math.min(F,y.theta)),y.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,y.phi)),y.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(D,e.dampingFactor):e.target.add(D),e.zoomToCursor&&A||e.object.isOrthographicCamera?y.radius=le(y.radius):y.radius=le(y.radius*M),t.setFromSpherical(y),t.applyQuaternion(j),De.copy(e.target).add(t),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(w.theta*=1-e.dampingFactor,w.phi*=1-e.dampingFactor,D.multiplyScalar(1-e.dampingFactor)):(w.set(0,0,0),D.set(0,0,0));let q=!1;if(e.zoomToCursor&&A){let Q=null;if(e.object instanceof fe&&e.object.isPerspectiveCamera){const J=t.length();Q=le(J*M);const ne=J-Q;e.object.position.addScaledVector(T,ne),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const J=new S(E.x,E.y,0);J.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/M)),e.object.updateProjectionMatrix(),q=!0;const ne=new S(E.x,E.y,0);ne.unproject(e.object),e.object.position.sub(ne).add(J),e.object.updateMatrixWorld(),Q=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;Q!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(Q).add(e.object.position):(se.origin.copy(e.object.position),se.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(se.direction))<Xt?a.lookAt(e.target):(He.setFromNormalAndCoplanarPoint(e.object.up,e.target),se.intersectPlane(He,e.target))))}else e.object instanceof he&&e.object.isOrthographicCamera&&(q=M!==1,q&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/M)),e.object.updateProjectionMatrix()));return M=1,A=!1,q||N.distanceToSquared(e.object.position)>Y||8*(1-z.dot(e.object.quaternion))>Y?(e.dispatchEvent(h),N.copy(e.object.position),z.copy(e.object.quaternion),q=!1,!0):!1}})(),this.connect=t=>{e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",ke),e.domElement.addEventListener("pointerdown",Se),e.domElement.addEventListener("pointercancel",W),e.domElement.addEventListener("wheel",Te)},this.dispose=()=>{var t,n,m,j,N,z;e.domElement&&(e.domElement.style.touchAction="auto"),(t=e.domElement)==null||t.removeEventListener("contextmenu",ke),(n=e.domElement)==null||n.removeEventListener("pointerdown",Se),(m=e.domElement)==null||m.removeEventListener("pointercancel",W),(j=e.domElement)==null||j.removeEventListener("wheel",Te),(N=e.domElement)==null||N.ownerDocument.removeEventListener("pointermove",de),(z=e.domElement)==null||z.ownerDocument.removeEventListener("pointerup",W),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",me)};const e=this,h={type:"change"},b={type:"start"},v={type:"end"},i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let p=i.NONE;const Y=1e-6,y=new Ae,w=new Ae;let M=1;const D=new S,k=new L,C=new L,O=new L,_=new L,s=new L,l=new L,g=new L,d=new L,f=new L,T=new S,E=new L;let A=!1;const x=[],te={};function Xe(){return 2*Math.PI/60/60*e.autoRotateSpeed}function V(){return Math.pow(.95,e.zoomSpeed)}function ie(t){e.reverseOrbit||e.reverseHorizontalOrbit?w.theta+=t:w.theta-=t}function ge(t){e.reverseOrbit||e.reverseVerticalOrbit?w.phi+=t:w.phi-=t}const xe=(()=>{const t=new S;return function(m,j){t.setFromMatrixColumn(j,0),t.multiplyScalar(-m),D.add(t)}})(),je=(()=>{const t=new S;return function(m,j){e.screenSpacePanning===!0?t.setFromMatrixColumn(j,1):(t.setFromMatrixColumn(j,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(m),D.add(t)}})(),X=(()=>{const t=new S;return function(m,j){const N=e.domElement;if(N&&e.object instanceof fe&&e.object.isPerspectiveCamera){const z=e.object.position;t.copy(z).sub(e.target);let U=t.length();U*=Math.tan(e.object.fov/2*Math.PI/180),xe(2*m*U/N.clientHeight,e.object.matrix),je(2*j*U/N.clientHeight,e.object.matrix)}else N&&e.object instanceof he&&e.object.isOrthographicCamera?(xe(m*(e.object.right-e.object.left)/e.object.zoom/N.clientWidth,e.object.matrix),je(j*(e.object.top-e.object.bottom)/e.object.zoom/N.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function re(t){e.object instanceof fe&&e.object.isPerspectiveCamera||e.object instanceof he&&e.object.isOrthographicCamera?M=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function oe(t){re(M/t)}function ce(t){re(M*t)}function ye(t){if(!e.zoomToCursor||!e.domElement)return;A=!0;const n=e.domElement.getBoundingClientRect(),m=t.clientX-n.left,j=t.clientY-n.top,N=n.width,z=n.height;E.x=m/N*2-1,E.y=-(j/z)*2+1,T.set(E.x,E.y,1).unproject(e.object).sub(e.object.position).normalize()}function le(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function ve(t){k.set(t.clientX,t.clientY)}function Ge(t){ye(t),g.set(t.clientX,t.clientY)}function we(t){_.set(t.clientX,t.clientY)}function Be(t){C.set(t.clientX,t.clientY),O.subVectors(C,k).multiplyScalar(e.rotateSpeed);const n=e.domElement;n&&(ie(2*Math.PI*O.x/n.clientHeight),ge(2*Math.PI*O.y/n.clientHeight)),k.copy(C),e.update()}function Ke(t){d.set(t.clientX,t.clientY),f.subVectors(d,g),f.y>0?oe(V()):f.y<0&&ce(V()),g.copy(d),e.update()}function $e(t){s.set(t.clientX,t.clientY),l.subVectors(s,_).multiplyScalar(e.panSpeed),X(l.x,l.y),_.copy(s),e.update()}function We(t){ye(t),t.deltaY<0?ce(V()):t.deltaY>0&&oe(V()),e.update()}function qe(t){let n=!1;switch(t.code){case e.keys.UP:X(0,e.keyPanSpeed),n=!0;break;case e.keys.BOTTOM:X(0,-e.keyPanSpeed),n=!0;break;case e.keys.LEFT:X(e.keyPanSpeed,0),n=!0;break;case e.keys.RIGHT:X(-e.keyPanSpeed,0),n=!0;break}n&&(t.preventDefault(),e.update())}function Pe(){if(x.length==1)k.set(x[0].pageX,x[0].pageY);else{const t=.5*(x[0].pageX+x[1].pageX),n=.5*(x[0].pageY+x[1].pageY);k.set(t,n)}}function Ee(){if(x.length==1)_.set(x[0].pageX,x[0].pageY);else{const t=.5*(x[0].pageX+x[1].pageX),n=.5*(x[0].pageY+x[1].pageY);_.set(t,n)}}function Ne(){const t=x[0].pageX-x[1].pageX,n=x[0].pageY-x[1].pageY,m=Math.sqrt(t*t+n*n);g.set(0,m)}function Qe(){e.enableZoom&&Ne(),e.enablePan&&Ee()}function Je(){e.enableZoom&&Ne(),e.enableRotate&&Pe()}function Me(t){if(x.length==1)C.set(t.pageX,t.pageY);else{const m=ue(t),j=.5*(t.pageX+m.x),N=.5*(t.pageY+m.y);C.set(j,N)}O.subVectors(C,k).multiplyScalar(e.rotateSpeed);const n=e.domElement;n&&(ie(2*Math.PI*O.x/n.clientHeight),ge(2*Math.PI*O.y/n.clientHeight)),k.copy(C)}function Ce(t){if(x.length==1)s.set(t.pageX,t.pageY);else{const n=ue(t),m=.5*(t.pageX+n.x),j=.5*(t.pageY+n.y);s.set(m,j)}l.subVectors(s,_).multiplyScalar(e.panSpeed),X(l.x,l.y),_.copy(s)}function Oe(t){const n=ue(t),m=t.pageX-n.x,j=t.pageY-n.y,N=Math.sqrt(m*m+j*j);d.set(0,N),f.set(0,Math.pow(d.y/g.y,e.zoomSpeed)),oe(f.y),g.copy(d)}function et(t){e.enableZoom&&Oe(t),e.enablePan&&Ce(t)}function tt(t){e.enableZoom&&Oe(t),e.enableRotate&&Me(t)}function Se(t){var n,m;e.enabled!==!1&&(x.length===0&&((n=e.domElement)==null||n.ownerDocument.addEventListener("pointermove",de),(m=e.domElement)==null||m.ownerDocument.addEventListener("pointerup",W)),it(t),t.pointerType==="touch"?st(t):ot(t))}function de(t){e.enabled!==!1&&(t.pointerType==="touch"?at(t):nt(t))}function W(t){var n,m,j;rt(t),x.length===0&&((n=e.domElement)==null||n.releasePointerCapture(t.pointerId),(m=e.domElement)==null||m.ownerDocument.removeEventListener("pointermove",de),(j=e.domElement)==null||j.ownerDocument.removeEventListener("pointerup",W)),e.dispatchEvent(v),p=i.NONE}function ot(t){let n;switch(t.button){case 0:n=e.mouseButtons.LEFT;break;case 1:n=e.mouseButtons.MIDDLE;break;case 2:n=e.mouseButtons.RIGHT;break;default:n=-1}switch(n){case G.DOLLY:if(e.enableZoom===!1)return;Ge(t),p=i.DOLLY;break;case G.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;we(t),p=i.PAN}else{if(e.enableRotate===!1)return;ve(t),p=i.ROTATE}break;case G.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;ve(t),p=i.ROTATE}else{if(e.enablePan===!1)return;we(t),p=i.PAN}break;default:p=i.NONE}p!==i.NONE&&e.dispatchEvent(b)}function nt(t){if(e.enabled!==!1)switch(p){case i.ROTATE:if(e.enableRotate===!1)return;Be(t);break;case i.DOLLY:if(e.enableZoom===!1)return;Ke(t);break;case i.PAN:if(e.enablePan===!1)return;$e(t);break}}function Te(t){e.enabled===!1||e.enableZoom===!1||p!==i.NONE&&p!==i.ROTATE||(t.preventDefault(),e.dispatchEvent(b),We(t),e.dispatchEvent(v))}function me(t){e.enabled===!1||e.enablePan===!1||qe(t)}function st(t){switch(_e(t),x.length){case 1:switch(e.touches.ONE){case B.ROTATE:if(e.enableRotate===!1)return;Pe(),p=i.TOUCH_ROTATE;break;case B.PAN:if(e.enablePan===!1)return;Ee(),p=i.TOUCH_PAN;break;default:p=i.NONE}break;case 2:switch(e.touches.TWO){case B.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Qe(),p=i.TOUCH_DOLLY_PAN;break;case B.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Je(),p=i.TOUCH_DOLLY_ROTATE;break;default:p=i.NONE}break;default:p=i.NONE}p!==i.NONE&&e.dispatchEvent(b)}function at(t){switch(_e(t),p){case i.TOUCH_ROTATE:if(e.enableRotate===!1)return;Me(t),e.update();break;case i.TOUCH_PAN:if(e.enablePan===!1)return;Ce(t),e.update();break;case i.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;et(t),e.update();break;case i.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;tt(t),e.update();break;default:p=i.NONE}}function ke(t){e.enabled!==!1&&t.preventDefault()}function it(t){x.push(t)}function rt(t){delete te[t.pointerId];for(let n=0;n<x.length;n++)if(x[n].pointerId==t.pointerId){x.splice(n,1);return}}function _e(t){let n=te[t.pointerId];n===void 0&&(n=new L,te[t.pointerId]=n),n.set(t.pageX,t.pageY)}function ue(t){const n=t.pointerId===x[0].pointerId?x[1]:x[0];return te[n.pointerId]}this.dollyIn=(t=V())=>{ce(t),e.update()},this.dollyOut=(t=V())=>{oe(t),e.update()},this.getScale=()=>M,this.setScale=t=>{re(t),e.update()},this.getZoomScale=()=>V(),u!==void 0&&this.connect(u),this.update()}};function Bt(r,a,u,e){var h;return h=class extends dt{constructor(b){super({vertexShader:a,fragmentShader:u,...b});for(const v in r)this.uniforms[v]=new mt(r[v]),Object.defineProperty(this,v,{get(){return this.uniforms[v].value},set(i){this.uniforms[v].value=i}});this.uniforms=ut.clone(this.uniforms)}},h.key=ht.generateUUID(),h}const Kt=()=>parseInt(ft.replace(/\D+/g,"")),$t=Kt(),Wt=P.forwardRef(({makeDefault:r,camera:a,regress:u,domElement:e,enableDamping:h=!0,keyEvents:b=!1,onChange:v,onStart:i,onEnd:p,...Y},y)=>{const w=H(f=>f.invalidate),M=H(f=>f.camera),D=H(f=>f.gl),k=H(f=>f.events),C=H(f=>f.setEvents),O=H(f=>f.set),_=H(f=>f.get),s=H(f=>f.performance),l=a||M,g=e||k.connected||D.domElement,d=P.useMemo(()=>new Gt(l),[l]);return be(()=>{d.enabled&&d.update()},-1),P.useEffect(()=>(b&&d.connect(b===!0?g:b),d.connect(g),()=>void d.dispose()),[b,g,u,d,w]),P.useEffect(()=>{const f=A=>{w(),u&&s.regress(),v&&v(A)},T=A=>{i&&i(A)},E=A=>{p&&p(A)};return d.addEventListener("change",f),d.addEventListener("start",T),d.addEventListener("end",E),()=>{d.removeEventListener("start",T),d.removeEventListener("end",E),d.removeEventListener("change",f)}},[v,i,p,d,w,C]),P.useEffect(()=>{if(r){const f=_().controls;return O({controls:d}),()=>O({controls:f})}},[r,d]),P.createElement("primitive",ae({ref:y,object:d,enableDamping:h},Y))}),qt=Bt({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Ie,sectionColor:new Ie,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new S,worldPlanePosition:new S},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${$t>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Qt=P.forwardRef(({args:r,cellColor:a="#000000",sectionColor:u="#2080ff",cellSize:e=.5,sectionSize:h=1,followCamera:b=!1,infiniteGrid:v=!1,fadeDistance:i=100,fadeStrength:p=1,fadeFrom:Y=1,cellThickness:y=.5,sectionThickness:w=1,side:M=bt,...D},k)=>{pt({GridMaterial:qt});const C=P.useRef(null);P.useImperativeHandle(k,()=>C.current,[]);const O=new Ze,_=new S(0,1,0),s=new S(0,0,0);be(d=>{O.setFromNormalAndCoplanarPoint(_,s).applyMatrix4(C.current.matrixWorld);const f=C.current.material,T=f.uniforms.worldCamProjPosition,E=f.uniforms.worldPlanePosition;O.projectPoint(d.camera.position,T.value),E.value.set(0,0,0).applyMatrix4(C.current.matrixWorld)});const l={cellSize:e,sectionSize:h,cellColor:a,sectionColor:u,cellThickness:y,sectionThickness:w},g={fadeDistance:i,fadeStrength:p,fadeFrom:Y,infiniteGrid:v,followCamera:b};return P.createElement("mesh",ae({ref:C,frustumCulled:!1},D),P.createElement("gridMaterial",ae({transparent:!0,"extensions-derivatives":!0,side:M},l,g)),P.createElement("planeGeometry",{args:r}))});function ee(r,a){const u=r+"Geometry";return P.forwardRef(({args:e,children:h,...b},v)=>{const i=P.useRef(null);return P.useImperativeHandle(v,()=>i.current),P.useLayoutEffect(()=>void(a==null?void 0:a(i.current))),P.createElement("mesh",ae({ref:i},b),P.createElement(u,{attach:"geometry",args:e}),h)})}const Jt=ee("box"),eo=ee("cone"),to=ee("cylinder"),oo=ee("sphere"),no=ee("torus"),so={objects:[{id:"1",type:"box",position:[0,.5,0],rotation:[0,0,0],scale:[1,1,1],color:"#3b82f6",visible:!0}],backgroundColor:"#1a1a2e",gridVisible:!0,shadowsEnabled:!0};function ao({object:r,isSelected:a,onClick:u}){const e=P.useRef(null),[h,b]=P.useState(!1);if(be(p=>{e.current&&a&&(e.current.rotation.y+=.01)}),!r.visible)return null;const v={ref:e,position:r.position,rotation:r.rotation,scale:r.scale,onClick:p=>{p.stopPropagation(),u()},onPointerOver:()=>b(!0),onPointerOut:()=>b(!1)},i={color:h?"#ffffff":r.color,emissive:a?r.color:"#000000",emissiveIntensity:a?.3:0};switch(r.type){case"box":return o.jsx(Jt,{...v,args:[1,1,1],children:o.jsx("meshStandardMaterial",{...i})});case"sphere":return o.jsx(oo,{...v,args:[.5,32,32],children:o.jsx("meshStandardMaterial",{...i})});case"cylinder":return o.jsx(to,{...v,args:[.5,.5,1,32],children:o.jsx("meshStandardMaterial",{...i})});case"cone":return o.jsx(eo,{...v,args:[.5,1,32],children:o.jsx("meshStandardMaterial",{...i})});case"torus":return o.jsx(no,{...v,args:[.5,.2,16,100],children:o.jsx("meshStandardMaterial",{...i})});default:return null}}function io({objects:r,selectedId:a,onSelectObject:u,gridVisible:e,shadowsEnabled:h}){return o.jsxs(o.Fragment,{children:[o.jsx("ambientLight",{intensity:.5}),o.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:h}),o.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),e&&o.jsx(Qt,{infiniteGrid:!0,fadeDistance:50,fadeStrength:5}),r.map(b=>o.jsx(ao,{object:b,isSelected:a===b.id,onClick:()=>u(b.id)},b.id)),o.jsx(Wt,{makeDefault:!0})]})}function Co(){const[r,a]=P.useState(so),[u,e]=P.useState(null),[h,b]=P.useState("translate"),v=P.useRef(null),i=r.objects.find(s=>s.id===u),p=s=>{const l={id:Date.now().toString(),type:s,position:[Math.random()*4-2,1,Math.random()*4-2],rotation:[0,0,0],scale:[1,1,1],color:`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,visible:!0};a(g=>({...g,objects:[...g.objects,l]})),e(l.id),Z.success(`Added ${s}`)},Y=s=>{a(l=>({...l,objects:l.objects.filter(g=>g.id!==s)})),u===s&&e(null),Z.success("Object deleted")},y=s=>{const l=r.objects.find(d=>d.id===s);if(!l)return;const g={...l,id:Date.now().toString(),position:[l.position[0]+1,l.position[1],l.position[2]+1]};a(d=>({...d,objects:[...d.objects,g]})),e(g.id),Z.success("Object duplicated")},w=(s,l)=>{a(g=>({...g,objects:g.objects.map(d=>d.id===s?{...d,...l}:d)}))},M=(s,l,g)=>{const d=r.objects.find(x=>x.id===s);if(!d)return;const f=h==="translate"?"position":h==="rotate"?"rotation":"scale",E=[...d[f]],A=l==="x"?0:l==="y"?1:2;E[A]=g,w(s,{[f]:E})},D=()=>{const s=JSON.stringify(r,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(s),g=`scene-${Date.now()}.json`,d=document.createElement("a");d.setAttribute("href",l),d.setAttribute("download",g),d.click(),Z.success("Scene saved!")},k=s=>{var d;const l=(d=s.target.files)==null?void 0:d[0];if(!l)return;const g=new FileReader;g.onload=f=>{var T;try{const E=JSON.parse((T=f.target)==null?void 0:T.result);a(E),e(null),Z.success("Scene loaded!")}catch{Z.error("Invalid scene file")}},g.readAsText(l)},C=()=>{confirm("Are you sure you want to clear the scene?")&&(a({...r,objects:[]}),e(null),Z.success("Scene cleared"))},O={box:o.jsx(Ue,{className:"w-4 h-4"}),sphere:o.jsx(Mt,{className:"w-4 h-4"}),cylinder:o.jsx(Ot,{className:"w-4 h-4"}),cone:o.jsx(Rt,{className:"w-4 h-4"}),torus:o.jsx(Tt,{className:"w-4 h-4"})},_={box:"Cube",sphere:"Sphere",cylinder:"Cylinder",cone:"Cone",torus:"Torus"};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"border-b bg-card",children:o.jsx("div",{className:"container mx-auto px-4 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"3D Scene Builder"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and edit 3D scenes with ease"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(I,{variant:"outline",size:"sm",onClick:D,children:[o.jsx(wt,{className:"w-4 h-4 mr-2"}),"Save"]}),o.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{var s;return(s=v.current)==null?void 0:s.click()},children:[o.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Load"]}),o.jsx("input",{ref:v,type:"file",accept:".json",onChange:k,className:"hidden"}),o.jsxs(I,{variant:"destructive",size:"sm",onClick:C,children:[o.jsx(ze,{className:"w-4 h-4 mr-2"}),"Clear"]})]})]})})}),o.jsxs("div",{className:"flex h-[calc(100vh-80px)]",children:[o.jsx("div",{className:"w-64 border-r bg-card overflow-y-auto",children:o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Add Objects"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:Object.keys(O).map(s=>o.jsxs(I,{variant:"outline",size:"sm",onClick:()=>p(s),className:"flex flex-col items-center gap-1 h-auto py-3",children:[O[s],o.jsx("span",{className:"text-xs",children:_[s]})]},s))}),o.jsx("h3",{className:"font-semibold mb-3",children:"Scene Objects"}),o.jsx("div",{className:"space-y-2",children:r.objects.length===0?o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No objects in scene"}):r.objects.map(s=>o.jsxs(ct.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-center gap-2 p-2 rounded-lg cursor-pointer transition-colors ${u===s.id?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,onClick:()=>e(s.id),children:[O[s.type],o.jsx("span",{className:"flex-1 text-sm capitalize",children:s.type}),o.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:l=>{l.stopPropagation(),w(s.id,{visible:!s.visible})},children:s.visible?o.jsx(Et,{className:"w-3 h-3"}):o.jsx(Nt,{className:"w-3 h-3"})}),o.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:l=>{l.stopPropagation(),y(s.id)},children:o.jsx(xt,{className:"w-3 h-3"})}),o.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:text-destructive",onClick:l=>{l.stopPropagation(),Y(s.id)},children:o.jsx(ze,{className:"w-3 h-3"})})]},s.id))})]})}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(gt,{shadows:r.shadowsEnabled,camera:{position:[5,5,5],fov:50},style:{background:r.backgroundColor},onClick:()=>e(null),children:o.jsx(io,{objects:r.objects,selectedId:u,onSelectObject:e,gridVisible:r.gridVisible,shadowsEnabled:r.shadowsEnabled})}),o.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center gap-2",children:[o.jsxs("div",{className:"bg-card/90 backdrop-blur-sm rounded-lg p-2 flex items-center gap-2",children:[o.jsx(Ye,{checked:r.gridVisible,onCheckedChange:s=>a(l=>({...l,gridVisible:s}))}),o.jsx(K,{className:"text-xs",children:"Grid"})]}),o.jsxs("div",{className:"bg-card/90 backdrop-blur-sm rounded-lg p-2 flex items-center gap-2",children:[o.jsx(Ye,{checked:r.shadowsEnabled,onCheckedChange:s=>a(l=>({...l,shadowsEnabled:s}))}),o.jsx(K,{className:"text-xs",children:"Shadows"})]})]})]}),o.jsx("div",{className:"w-80 border-l bg-card overflow-y-auto",children:o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Properties"}),i?o.jsxs(yt,{defaultValue:"transform",className:"w-full",children:[o.jsxs(vt,{className:"grid w-full grid-cols-2",children:[o.jsx(Re,{value:"transform",children:"Transform"}),o.jsx(Re,{value:"material",children:"Material"})]}),o.jsxs(Fe,{value:"transform",className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(I,{variant:h==="translate"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>b("translate"),children:[o.jsx(At,{className:"w-4 h-4 mr-1"}),"Move"]}),o.jsxs(I,{variant:h==="rotate"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>b("rotate"),children:[o.jsx(It,{className:"w-4 h-4 mr-1"}),"Rotate"]}),o.jsxs(I,{variant:h==="scale"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>b("scale"),children:[o.jsx(_t,{className:"w-4 h-4 mr-1"}),"Scale"]})]}),["x","y","z"].map(s=>{const g=i[h==="translate"?"position":h==="rotate"?"rotation":"scale"][s==="x"?0:s==="y"?1:2],d=h==="scale"?.1:h==="rotate"?0:-10,f=h==="scale"?5:h==="rotate"?360:10,T=h==="rotate"?1:.1;return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{className:"uppercase text-xs font-bold text-muted-foreground",children:s}),o.jsx(pe,{type:"number",value:Number(g.toFixed(2)),onChange:E=>M(i.id,s,parseFloat(E.target.value)||0),className:"w-20 h-7 text-xs",step:T})]}),o.jsx(jt,{value:[g],min:d,max:f,step:T,onValueChange:([E])=>M(i.id,s,E)})]},s)})]}),o.jsxs(Fe,{value:"material",className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:i.color,onChange:s=>w(i.id,{color:s.target.value}),className:"w-10 h-10 rounded cursor-pointer"}),o.jsx(pe,{value:i.color,onChange:s=>w(i.id,{color:s.target.value}),className:"flex-1"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Presets"}),o.jsx("div",{className:"grid grid-cols-6 gap-1",children:["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#64748b","#94a3b8"].map(s=>o.jsx("button",{className:"w-8 h-8 rounded-md border-2 border-transparent hover:border-primary transition-colors",style:{backgroundColor:s},onClick:()=>w(i.id,{color:s})},s))})]})]})]}):o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Ue,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Select an object to edit its properties"})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t",children:[o.jsx("h4",{className:"font-semibold mb-4",children:"Scene Settings"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Background Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:r.backgroundColor,onChange:s=>a(l=>({...l,backgroundColor:s.target.value})),className:"w-10 h-10 rounded cursor-pointer"}),o.jsx(pe,{value:r.backgroundColor,onChange:s=>a(l=>({...l,backgroundColor:s.target.value})),className:"flex-1"})]})]})})]})]})})]})]})}export{Co as Scene3DBuilderPage};
//# sourceMappingURL=Scene3DBuilderPage-CXZRTfOx.js.map
