import{j as e,m as j}from"./ui-8Or-2zOT-8Or-2zOT.js";import{r as u}from"./vendor-QyoG3HE1-QyoG3HE1.js";import{C,b as G,f as H,a as W,B as f}from"./index-CB-nuzdG-CB-nuzdG.js";import{B as T}from"./badge-BFIphGmu-BFIphGmu.js";import{P as R}from"./play-DOGSkvdD-DOGSkvdD.js";import{R as b}from"./rotate-ccw-BgUc6dP3-BgUc6dP3.js";import{C as F}from"./chevron-left-DYM13oXh-DYM13oXh.js";import{C as Y}from"./chevron-right-BvmJQ-b5-BvmJQ-b5.js";import{N as D}from"./Navigation-CVIh0ny8-CVIh0ny8.js";import{F as z}from"./Footer-HVOx1zD2-HVOx1zD2.js";import{G as B}from"./gamepad-2-Bui3mMO4-Bui3mMO4.js";import{T as V}from"./target-BaO0FYrG-BaO0FYrG.js";import{Z as _}from"./zap-D85VQT3v-D85VQT3v.js";import"./animation-Cg-7L8ts-Cg-7L8ts.js";import"./input-BH5s_kIV-BH5s_kIV.js";import"./middleware-BIVXqGDk-BIVXqGDk.js";const h={canvasWidth:400,canvasHeight:500,ballRadius:6,paddleWidth:80,paddleHeight:10,brickRows:5,brickCols:8},k=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6"];function M(){return Math.random().toString(36).substr(2,9)}function N(s=h){return{x:s.canvasWidth/2,y:s.canvasHeight-50,vx:3,vy:-3,radius:s.ballRadius}}function q(s=h){return{x:s.canvasWidth/2,y:s.canvasHeight-30,width:s.paddleWidth,height:s.paddleHeight}}function I(s,r=h){const a=[],t=(r.canvasWidth-20)/r.brickCols,c=20,d=Math.min(r.brickRows+s-1,8);for(let o=0;o<d;o++)for(let i=0;i<r.brickCols;i++)a.push({id:M(),x:10+i*t+t/2,y:50+o*(c+5)+c/2,width:t-4,height:c,color:k[o%k.length],points:(d-o)*10});return a}function y(s=h){return{ball:N(s),paddle:q(s),bricks:I(1,s),particles:[],score:0,lives:3,level:1,status:"IDLE",highScore:parseInt(localStorage.getItem("pinballHighScore")||"0")}}function L(s,r,a=h){if(s.status!=="PLAYING")return s;const t={...s.paddle},c=8;return r==="LEFT"?t.x=Math.max(t.width/2,t.x-c):t.x=Math.min(a.canvasWidth-t.width/2,t.x+c),{...s,paddle:t}}function K(s,r,a){const t=[];for(let c=0;c<6;c++){const d=Math.PI*2*c/6;t.push({id:M(),x:s,y:r,vx:Math.cos(d)*2,vy:Math.sin(d)*2,life:20,maxLife:20,color:a})}return t}function S(s,r){const a=Math.max(r.x-r.width/2,Math.min(s.x,r.x+r.width/2)),t=Math.max(r.y-r.height/2,Math.min(s.y,r.y+r.height/2)),c=s.x-a,d=s.y-t;return c*c+d*d<s.radius*s.radius}function X(s,r=h){if(s.status!=="PLAYING")return s;let a={...s},t={...a.ball};if(t.x+=t.vx,t.y+=t.vy,(t.x-t.radius<=0||t.x+t.radius>=r.canvasWidth)&&(t.vx=-t.vx,t.x=Math.max(t.radius,Math.min(r.canvasWidth-t.radius,t.x))),t.y-t.radius<=0&&(t.vy=-t.vy,t.y=t.radius),S(t,a.paddle)&&t.vy>0&&t.y<a.paddle.y){t.vy=-Math.abs(t.vy);const i=(t.x-a.paddle.x)/(a.paddle.width/2);t.vx=i*4}const c=[];let d=[...a.particles],o=a.score;for(const i of a.bricks)S(t,i)?(t.vy=-t.vy,o+=i.points,d.push(...K(i.x,i.y,i.color))):c.push(i);if(a.bricks=c,a.particles=d,a.score=o,a.particles=a.particles.map(i=>({...i,x:i.x+i.vx,y:i.y+i.vy,life:i.life-1})).filter(i=>i.life>0),t.y>r.canvasHeight)if(a.lives--,a.lives<=0){a.status="GAME_OVER";const i=Math.max(a.score,a.highScore);localStorage.setItem("pinballHighScore",i.toString()),a.highScore=i}else t=N(r);return a.bricks.length===0&&(a.level++,a.bricks=I(a.level,r),t=N(r),a.status="IDLE"),a.ball=t,a}function A(s){return s.status==="GAME_OVER"?{...y(),status:"PLAYING",highScore:s.highScore}:{...s,status:"PLAYING"}}function Z(s){return{...y(),highScore:s.highScore}}function O({onScoreChange:s,onGameOver:r}){const a=u.useRef(null),[t,c]=u.useState(()=>y()),d=u.useRef(null),o=u.useRef({}),i=h.canvasWidth,w=h.canvasHeight,E=()=>{const x=a.current;if(!x)return;const n=x.getContext("2d");n&&(n.fillStyle="#1a1a2e",n.fillRect(0,0,i,w),t.bricks.forEach(l=>{n.fillStyle=l.color,n.fillRect(l.x-l.width/2,l.y-l.height/2,l.width,l.height),n.fillStyle="rgba(255,255,255,0.3)",n.fillRect(l.x-l.width/2,l.y-l.height/2,l.width,3)}),n.fillStyle="#60a5fa",n.fillRect(t.paddle.x-t.paddle.width/2,t.paddle.y-t.paddle.height/2,t.paddle.width,t.paddle.height),n.beginPath(),n.arc(t.ball.x,t.ball.y,t.ball.radius,0,Math.PI*2),n.fillStyle="#ffffff",n.fill(),n.strokeStyle="#e5e7eb",n.lineWidth=2,n.stroke(),t.particles.forEach(l=>{const p=l.life/l.maxLife;n.fillStyle=l.color.replace(")",`, ${p})`).replace("rgb","rgba"),n.fillRect(l.x-2,l.y-2,4,4)}))};u.useEffect(()=>{if(t.status!=="PLAYING"){d.current&&(cancelAnimationFrame(d.current),d.current=null),E();return}let x=0;const n=1e3/60,l=p=>{p-x>=n&&(x=p,c(v=>{let m=v;return(o.current.ArrowLeft||o.current.a)&&(m=L(m,"LEFT")),(o.current.ArrowRight||o.current.d)&&(m=L(m,"RIGHT")),m=X(m),m.score!==v.score&&(s==null||s(m.score)),m.status==="GAME_OVER"&&v.status!=="GAME_OVER"&&(r==null||r(m.score)),m})),d.current=requestAnimationFrame(l)};return d.current=requestAnimationFrame(l),()=>{d.current&&cancelAnimationFrame(d.current)}},[t.status,s,r]),u.useEffect(()=>{E()},[t]),u.useEffect(()=>{const x=l=>{o.current[l.key]=!0,l.key===" "&&t.status==="IDLE"&&(l.preventDefault(),c(p=>A(p)))},n=l=>{o.current[l.key]=!1};return window.addEventListener("keydown",x),window.addEventListener("keyup",n),()=>{window.removeEventListener("keydown",x),window.removeEventListener("keyup",n)}},[t.status]);const g=()=>c(x=>A(x)),P=()=>c(x=>Z(x));return e.jsxs(C,{className:"w-full max-w-lg mx-auto",children:[e.jsxs(G,{className:"flex flex-row items-center justify-between",children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“"}),"å¼¹çƒ"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(T,{variant:"secondary",children:["æœ€é«˜åˆ†: ",t.highScore]})})]}),e.jsxs(W,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"åˆ†æ•°"}),e.jsx("p",{className:"text-xl font-bold",children:t.score})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ç”Ÿå‘½"}),e.jsx("p",{className:"text-xl font-bold",children:"â¤ï¸".repeat(t.lives)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"å…³å¡"}),e.jsx("p",{className:"text-xl font-bold",children:t.level})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ç –å—"}),e.jsx("p",{className:"text-xl font-bold",children:t.bricks.length})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"relative",children:[e.jsx("canvas",{ref:a,width:i,height:w,className:"border-2 border-border rounded-lg"}),t.status!=="PLAYING"&&e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center bg-background/80 rounded-lg",children:[t.status==="IDLE"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:"ç‚¹å‡»å¼€å§‹æˆ–ä½¿ç”¨ç©ºæ ¼é”®"}),e.jsxs(f,{onClick:g,size:"lg",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"å¼€å§‹æ¸¸æˆ"]})]}),t.status==="GAME_OVER"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold text-destructive mb-2",children:"æ¸¸æˆç»“æŸ"}),e.jsxs("p",{className:"text-lg mb-4",children:["æœ€ç»ˆå¾—åˆ†: ",t.score]}),e.jsxs(f,{onClick:g,size:"lg",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"å†æ¥ä¸€å±€"]})]})]})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[t.status==="IDLE"?e.jsxs(f,{onClick:g,children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"å¼€å§‹"]}):t.status==="GAME_OVER"?e.jsxs(f,{onClick:g,children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"å†æ¥ä¸€å±€"]}):null,e.jsxs(f,{variant:"outline",onClick:P,children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"é‡ç½®"]})]}),e.jsxs("div",{className:"flex justify-center gap-4 md:hidden",children:[e.jsx(f,{variant:"outline",size:"icon",onTouchStart:()=>o.current.ArrowLeft=!0,onTouchEnd:()=>o.current.ArrowLeft=!1,disabled:t.status!=="PLAYING",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx(f,{variant:"outline",size:"icon",onTouchStart:()=>o.current.ArrowRight=!0,onTouchEnd:()=>o.current.ArrowRight=!1,disabled:t.status!=="PLAYING",children:e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[e.jsx("p",{children:"å·¦å³æ–¹å‘é”®æˆ–ADé”®ç§»åŠ¨æŒ¡æ¿"}),e.jsx("p",{className:"mt-1",children:"ç©ºæ ¼é”®å¼€å§‹æ¸¸æˆ"})]})]})]})}function me(){return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(D,{}),e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex-1 pt-16",children:[e.jsxs("section",{className:"relative py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-to-b from-purple-500/5 to-transparent rounded-full blur-3xl"})}),e.jsxs("div",{className:"relative max-w-7xl mx-auto text-center",children:[e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-purple-500/10 mb-6",children:e.jsx(B,{className:"w-8 h-8 text-purple-500"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold tracking-tight mb-4",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"å¼¹çƒ"})}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"ç»å…¸å¼¹çƒæ¸¸æˆï¼Œæ§åˆ¶æŒ¡æ¿åå¼¹çƒä½“å‡»ç¢ç –å—ï¼"})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-8 flex justify-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{children:"å‡»ç¢ç –å—"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{children:"å…³å¡è¿›é˜¶"})]})]})]})]}),e.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(O,{})})}),e.jsx("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-muted/30",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"æ¸¸æˆæŠ€å·§"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ¯"}),e.jsx("h3",{className:"font-semibold mb-2",children:"æ§åˆ¶è§’åº¦"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"çƒå‡»ä¸­æŒ¡æ¿ä¸åŒä½ç½®ä¼šæ”¹å˜åå¼¹è§’åº¦"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"âš¡"}),e.jsx("h3",{className:"font-semibold mb-2",children:"ä¼˜å…ˆå‡»ç ´"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ä¼˜å…ˆå‡»ç¢ä¸Šæ–¹çš„ç –å—ï¼Œè·å¾—æ›´å¤šåˆ†æ•°"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ›¡ï¸"}),e.jsx("h3",{className:"font-semibold mb-2",children:"ä¿æŠ¤ç”Ÿå‘½"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ä¸è¦è®©çƒæ‰è½ï¼Œåˆç†åˆ©ç”¨ä¸‰æ¡ç”Ÿå‘½"})]})]})]})})]}),e.jsx(z,{})]})}export{me as PinballPage};
//# sourceMappingURL=PinballPage-6WXqc8QJ-6WXqc8QJ.js.map
