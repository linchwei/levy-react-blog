{"version":3,"file":"AIChatPage-DOfZnNtO-DOfZnNtO.js","sources":["../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/pen.js","../../node_modules/lucide-react/dist/esm/icons/square.js","../../src/components/ai/ChatSidebar.tsx","../../src/components/ai/ChatInput.tsx","../../src/components/ai/EmptyState.tsx","../../src/pages/AIChatPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\",\n      key: \"18887p\"\n    }\n  ]\n];\nconst MessageSquare = createLucideIcon(\"message-square\", __iconNode);\n\nexport { __iconNode, MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst Pen = createLucideIcon(\"pen\", __iconNode);\n\nexport { __iconNode, Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n];\nconst Square = createLucideIcon(\"square\", __iconNode);\n\nexport { __iconNode, Square as default };\n//# sourceMappingURL=square.js.map\n","import { useState, useCallback } from 'react'\nimport {\n  Plus,\n  MessageSquare,\n  Trash2,\n  Edit2,\n  Check,\n  X,\n} from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport type { Message } from './ChatMessage'\n\nexport interface ChatSession {\n  id: string\n  title: string\n  messages: Message[]\n  createdAt: number\n  updatedAt: number\n}\n\ninterface ChatSidebarProps {\n  sessions: ChatSession[]\n  currentSessionId: string | null\n  onNewChat: () => void\n  onSelectSession: (sessionId: string) => void\n  onDeleteSession: (sessionId: string) => void\n  onRenameSession: (sessionId: string, newTitle: string) => void\n  isDark: boolean\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport function ChatSidebar({\n  sessions,\n  currentSessionId,\n  onNewChat,\n  onSelectSession,\n  onDeleteSession,\n  onRenameSession,\n  isDark,\n  isOpen,\n  onClose,\n}: ChatSidebarProps) {\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [editTitle, setEditTitle] = useState('')\n\n  const handleStartEdit = useCallback((session: ChatSession) => {\n    setEditingId(session.id)\n    setEditTitle(session.title)\n  }, [])\n\n  const handleSaveEdit = useCallback(\n    (sessionId: string) => {\n      if (editTitle.trim()) {\n        onRenameSession(sessionId, editTitle.trim())\n      }\n      setEditingId(null)\n      setEditTitle('')\n    },\n    [editTitle, onRenameSession]\n  )\n\n  const handleCancelEdit = useCallback(() => {\n    setEditingId(null)\n    setEditTitle('')\n  }, [])\n\n  const formatDate = (timestamp: number) => {\n    const date = new Date(timestamp)\n    const now = new Date()\n    const isToday = date.toDateString() === now.toDateString()\n    const isYesterday =\n      new Date(now.setDate(now.getDate() - 1)).toDateString() ===\n      date.toDateString()\n\n    if (isToday) {\n      return date.toLocaleTimeString('zh-CN', {\n        hour: '2-digit',\n        minute: '2-digit',\n      })\n    } else if (isYesterday) {\n      return '昨天'\n    } else {\n      return date.toLocaleDateString('zh-CN', {\n        month: 'short',\n        day: 'numeric',\n      })\n    }\n  }\n\n  return (\n    <>\n      {/* Mobile overlay */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div\n        className={cn(\n          'fixed lg:static inset-y-0 left-0 z-50 w-72 flex flex-col h-full',\n          isDark\n            ? 'bg-zinc-950 border-r border-zinc-800'\n            : 'bg-gray-50 border-r border-gray-200',\n          isOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'\n        )}\n      >\n        {/* Header */}\n        <div className={cn(\n          'p-4 border-b',\n          isDark ? 'border-zinc-800' : 'border-gray-200'\n        )}>\n          <Button\n            onClick={onNewChat}\n            className=\"w-full justify-start gap-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            新建对话\n          </Button>\n        </div>\n\n        {/* Sessions list */}\n        <ScrollArea className=\"flex-1\">\n          <div className=\"p-2 space-y-1\">\n            {sessions.length === 0 ? (\n              <div\n                className={cn(\n                  'text-center py-8 text-sm',\n                  isDark ? 'text-zinc-500' : 'text-gray-400'\n                )}\n              >\n                暂无对话记录\n              </div>\n            ) : (\n              sessions.map(session => (\n                <div\n                  key={session.id}\n                  className={cn(\n                    'group flex items-center gap-2 p-2 rounded-lg cursor-pointer transition-colors',\n                    currentSessionId === session.id\n                      ? isDark\n                        ? 'bg-zinc-800'\n                        : 'bg-white shadow-sm'\n                      : isDark\n                        ? 'hover:bg-zinc-900'\n                        : 'hover:bg-gray-100'\n                  )}\n                  onClick={() => onSelectSession(session.id)}\n                >\n                  <MessageSquare\n                    className={cn(\n                      'w-4 h-4 flex-shrink-0',\n                      isDark ? 'text-zinc-400' : 'text-gray-500'\n                    )}\n                  />\n\n                  {editingId === session.id ? (\n                    <div className=\"flex-1 flex items-center gap-1\">\n                      <input\n                        type=\"text\"\n                        value={editTitle}\n                        onChange={e => setEditTitle(e.target.value)}\n                        onKeyDown={e => {\n                          if (e.key === 'Enter') handleSaveEdit(session.id)\n                          if (e.key === 'Escape') handleCancelEdit()\n                        }}\n                        onClick={e => e.stopPropagation()}\n                        autoFocus\n                        className={cn(\n                          'flex-1 px-2 py-1 text-sm rounded border outline-none',\n                          isDark\n                            ? 'bg-zinc-900 border-zinc-700 text-zinc-100'\n                            : 'bg-white border-gray-300 text-gray-900'\n                        )}\n                      />\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-6 w-6\"\n                        onClick={e => {\n                          e.stopPropagation()\n                          handleSaveEdit(session.id)\n                        }}\n                      >\n                        <Check className=\"w-3 h-3 text-green-500\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-6 w-6\"\n                        onClick={e => {\n                          e.stopPropagation()\n                          handleCancelEdit()\n                        }}\n                      >\n                        <X className=\"w-3 h-3 text-red-500\" />\n                      </Button>\n                    </div>\n                  ) : (\n                    <>\n                      <div className=\"flex-1 min-w-0\">\n                        <p\n                          className={cn(\n                            'text-sm truncate',\n                            isDark ? 'text-zinc-200' : 'text-gray-700'\n                          )}\n                        >\n                          {session.title}\n                        </p>\n                        <p\n                          className={cn(\n                            'text-xs',\n                            isDark ? 'text-zinc-500' : 'text-gray-400'\n                          )}\n                        >\n                          {formatDate(session.updatedAt)}\n                        </p>\n                      </div>\n\n                      <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-6 w-6\"\n                          onClick={e => {\n                            e.stopPropagation()\n                            handleStartEdit(session)\n                          }}\n                        >\n                          <Edit2 className=\"w-3 h-3\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"h-6 w-6\"\n                          onClick={e => {\n                            e.stopPropagation()\n                            onDeleteSession(session.id)\n                          }}\n                        >\n                          <Trash2 className=\"w-3 h-3 text-red-500\" />\n                        </Button>\n                      </div>\n                    </>\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n        </ScrollArea>\n\n        {/* Footer info */}\n        <div\n          className={cn(\n            'p-4 border-t',\n            isDark ? 'border-zinc-800' : 'border-gray-200'\n          )}\n        >\n          <p\n            className={cn(\n              'text-xs text-center',\n              isDark ? 'text-zinc-500' : 'text-gray-400'\n            )}\n          >\n            使用网站主题设置\n          </p>\n        </div>\n      </div>\n    </>\n  )\n}\n","import { useState, useRef, useCallback, type KeyboardEvent } from 'react'\nimport { Send, Square } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\ninterface ChatInputProps {\n  onSend: (message: string) => void\n  isLoading: boolean\n  isDark: boolean\n  onStop?: () => void\n  placeholder?: string\n}\n\nexport function ChatInput({\n  onSend,\n  isLoading,\n  isDark,\n  onStop,\n  placeholder = '输入消息...',\n}: ChatInputProps) {\n  const [message, setMessage] = useState('')\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\n\n  const handleSend = useCallback(() => {\n    const trimmedMessage = message.trim()\n    if (!trimmedMessage || isLoading) return\n\n    onSend(trimmedMessage)\n    setMessage('')\n\n    // Reset textarea height\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto'\n    }\n  }, [message, isLoading, onSend])\n\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent<HTMLTextAreaElement>) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault()\n        handleSend()\n      }\n    },\n    [handleSend]\n  )\n\n  const handleInput = useCallback(() => {\n    const textarea = textareaRef.current\n    if (textarea) {\n      textarea.style.height = 'auto'\n      textarea.style.height = `${Math.min(textarea.scrollHeight, 200)}px`\n    }\n  }, [])\n\n  return (\n    <div\n      className={cn(\n        'border-t px-4 py-4',\n        isDark ? 'border-zinc-800 bg-zinc-950' : 'border-gray-200 bg-white'\n      )}\n    >\n      <div className=\"max-w-4xl mx-auto\">\n        <div\n          className={cn(\n            'relative flex items-end gap-2 rounded-xl border p-3 transition-all',\n            isDark\n              ? 'border-zinc-700 bg-zinc-900 focus-within:border-zinc-600'\n              : 'border-gray-300 bg-white focus-within:border-gray-400'\n          )}\n        >\n          <textarea\n            ref={textareaRef}\n            value={message}\n            onChange={e => setMessage(e.target.value)}\n            onKeyDown={handleKeyDown}\n            onInput={handleInput}\n            placeholder={placeholder}\n            rows={1}\n            className={cn(\n              'flex-1 resize-none bg-transparent outline-none max-h-[200px] min-h-[24px]',\n              isDark\n                ? 'text-zinc-100 placeholder:text-zinc-500'\n                : 'text-gray-900 placeholder:text-gray-400'\n            )}\n            disabled={isLoading}\n          />\n\n          {isLoading ? (\n            <Button\n              variant=\"destructive\"\n              size=\"icon\"\n              onClick={onStop}\n              className=\"flex-shrink-0 h-8 w-8\"\n            >\n              <Square className=\"w-4 h-4\" />\n            </Button>\n          ) : (\n            <Button\n              variant=\"default\"\n              size=\"icon\"\n              onClick={handleSend}\n              disabled={!message.trim()}\n              className={cn(\n                'flex-shrink-0 h-8 w-8 transition-all',\n                message.trim()\n                  ? 'bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700'\n                  : 'opacity-50 cursor-not-allowed'\n              )}\n            >\n              <Send className=\"w-4 h-4\" />\n            </Button>\n          )}\n        </div>\n\n        <p\n          className={cn(\n            'text-xs mt-2 text-center',\n            isDark ? 'text-zinc-500' : 'text-gray-400'\n          )}\n        >\n          Enter 发送，Shift + Enter 换行\n        </p>\n      </div>\n    </div>\n  )\n}\n","import { Sparkles, MessageSquare, Code, Lightbulb } from 'lucide-react'\nimport { motion } from 'framer-motion'\nimport { cn } from '@/lib/utils'\n\ninterface EmptyStateProps {\n  isDark: boolean\n  onSuggestionClick?: (suggestion: string) => void\n}\n\nconst suggestions = [\n  {\n    icon: MessageSquare,\n    title: '解释一下',\n    description: 'React 的 useEffect 是如何工作的？',\n    prompt: '请详细解释 React 的 useEffect Hook 的工作原理，包括依赖数组、清理函数等。',\n  },\n  {\n    icon: Code,\n    title: '帮我写代码',\n    description: '用 TypeScript 实现一个防抖函数',\n    prompt: '请用 TypeScript 实现一个防抖（debounce）函数，包括类型定义和使用示例。',\n  },\n  {\n    icon: Lightbulb,\n    title: '给我建议',\n    description: '如何优化前端性能？',\n    prompt: '请给出前端性能优化的建议，包括加载优化、渲染优化、代码优化等方面。',\n  },\n  {\n    icon: Sparkles,\n    title: '创意写作',\n    description: '帮我写一篇技术博客的开头',\n    prompt: '请帮我写一篇关于前端开发的技术博客开头段落，要求引人入胜。',\n  },\n]\n\nexport function EmptyState({ isDark, onSuggestionClick }: EmptyStateProps) {\n  return (\n    <div className=\"flex flex-col items-center justify-center h-full px-4 py-12\">\n      {/* Hero section */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"text-center mb-12\"\n      >\n        <div\n          className={cn(\n            'w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4',\n            'bg-gradient-to-br from-blue-500 to-purple-600'\n          )}\n        >\n          <Sparkles className=\"w-8 h-8 text-white\" />\n        </div>\n        <h1\n          className={cn(\n            'text-2xl font-bold mb-2',\n            isDark ? 'text-zinc-100' : 'text-gray-900'\n          )}\n        >\n          AI 助手\n        </h1>\n        <p\n          className={cn(\n            'text-sm max-w-md',\n            isDark ? 'text-zinc-400' : 'text-gray-500'\n          )}\n        >\n          我可以帮你解答技术问题、编写代码、提供建议，或者只是聊聊天。\n        </p>\n      </motion.div>\n\n      {/* Suggestions */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-2xl\">\n        {suggestions.map((suggestion, index) => (\n          <motion.button\n            key={suggestion.title}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.1 }}\n            onClick={() => onSuggestionClick?.(suggestion.prompt)}\n            className={cn(\n              'flex items-start gap-3 p-4 rounded-xl text-left transition-all',\n              'border hover:shadow-md',\n              isDark\n                ? 'bg-zinc-900/50 border-zinc-800 hover:border-zinc-700 hover:bg-zinc-900'\n                : 'bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50'\n            )}\n          >\n            <div\n              className={cn(\n                'w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0',\n                isDark ? 'bg-zinc-800' : 'bg-gray-100'\n              )}\n            >\n              <suggestion.icon\n                className={cn(\n                  'w-4 h-4',\n                  isDark ? 'text-zinc-400' : 'text-gray-500'\n                )}\n              />\n            </div>\n            <div className=\"min-w-0\">\n              <h3\n                className={cn(\n                  'font-medium text-sm mb-0.5',\n                  isDark ? 'text-zinc-200' : 'text-gray-700'\n                )}\n              >\n                {suggestion.title}\n              </h3>\n              <p\n                className={cn(\n                  'text-xs truncate',\n                  isDark ? 'text-zinc-500' : 'text-gray-400'\n                )}\n              >\n                {suggestion.description}\n              </p>\n            </div>\n          </motion.button>\n        ))}\n      </div>\n\n      {/* Tips */}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.5 }}\n        className={cn(\n          'mt-12 text-xs text-center',\n          isDark ? 'text-zinc-500' : 'text-gray-400'\n        )}\n      >\n        <p>提示：支持 Markdown 格式，代码块可复制</p>\n      </motion.div>\n    </div>\n  )\n}\n","import { useState, useCallback, useEffect, useRef } from 'react'\nimport { Menu, Sparkles } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport { cn } from '@/lib/utils'\nimport { chatStream } from '@/services/aiService'\nimport { Navigation } from '@/components/home/Navigation'\nimport { Footer } from '@/components/home/Footer'\nimport { ChatSidebar, type ChatSession } from '@/components/ai/ChatSidebar'\nimport { ChatMessage, type Message } from '@/components/ai/ChatMessage'\nimport { ChatInput } from '@/components/ai/ChatInput'\nimport { EmptyState } from '@/components/ai/EmptyState'\n\nconst STORAGE_KEY = 'ai-chat-sessions'\nconst CURRENT_SESSION_KEY = 'ai-chat-current-session'\n\nfunction generateId(): string {\n  return Math.random().toString(36).substring(2, 15)\n}\n\nfunction generateTitle(content: string): string {\n  const trimmed = content.trim()\n  if (trimmed.length <= 20) return trimmed\n  return trimmed.substring(0, 20) + '...'\n}\n\nexport function AIChatPage() {\n  // 使用网站统一的主题系统\n  const [isDark, setIsDark] = useState(true)\n\n  const [sessions, setSessions] = useState<ChatSession[]>(() => {\n    if (typeof window === 'undefined') return []\n    const saved = localStorage.getItem(STORAGE_KEY)\n    return saved ? JSON.parse(saved) : []\n  })\n\n  const [currentSessionId, setCurrentSessionId] = useState<string | null>(\n    () => {\n      if (typeof window === 'undefined') return null\n      return localStorage.getItem(CURRENT_SESSION_KEY)\n    }\n  )\n\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const abortControllerRef = useRef<AbortController | null>(null)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  // 同步网站主题\n  useEffect(() => {\n    const checkTheme = () => {\n      setIsDark(document.documentElement.classList.contains('dark'))\n    }\n    checkTheme()\n\n    const observer = new MutationObserver(checkTheme)\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['class'],\n    })\n\n    return () => observer.disconnect()\n  }, [])\n\n  // Get current session\n  const currentSession = sessions.find(s => s.id === currentSessionId)\n  const messages = currentSession?.messages || []\n\n  // Save sessions to localStorage\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(sessions))\n  }, [sessions])\n\n  // Save current session id\n  useEffect(() => {\n    if (currentSessionId) {\n      localStorage.setItem(CURRENT_SESSION_KEY, currentSessionId)\n    }\n  }, [currentSessionId])\n\n  // Scroll to bottom when messages change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [messages])\n\n  const createNewSession = useCallback(() => {\n    const newSession: ChatSession = {\n      id: generateId(),\n      title: '新对话',\n      messages: [],\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n    }\n    setSessions(prev => [newSession, ...prev])\n    setCurrentSessionId(newSession.id)\n    setIsSidebarOpen(false)\n  }, [])\n\n  const selectSession = useCallback((sessionId: string) => {\n    setCurrentSessionId(sessionId)\n    setIsSidebarOpen(false)\n  }, [])\n\n  const deleteSession = useCallback(\n    (sessionId: string) => {\n      setSessions(prev => prev.filter(s => s.id !== sessionId))\n      if (currentSessionId === sessionId) {\n        setCurrentSessionId(null)\n      }\n    },\n    [currentSessionId]\n  )\n\n  const renameSession = useCallback((sessionId: string, newTitle: string) => {\n    setSessions(prev =>\n      prev.map(s =>\n        s.id === sessionId\n          ? { ...s, title: newTitle, updatedAt: Date.now() }\n          : s\n      )\n    )\n  }, [])\n\n  const stopGeneration = useCallback(() => {\n    abortControllerRef.current?.abort()\n    abortControllerRef.current = null\n    setIsLoading(false)\n\n    // Update streaming state\n    setSessions(prev =>\n      prev.map(s =>\n        s.id === currentSessionId\n          ? {\n              ...s,\n              messages: s.messages.map(m =>\n                m.isStreaming ? { ...m, isStreaming: false } : m\n              ),\n            }\n          : s\n      )\n    )\n  }, [currentSessionId])\n\n  const sendMessage = useCallback(\n    async (content: string) => {\n      if (!content.trim() || isLoading) return\n\n      // Create new session if none exists\n      let sessionId = currentSessionId\n      if (!sessionId) {\n        const newSession: ChatSession = {\n          id: generateId(),\n          title: generateTitle(content),\n          messages: [],\n          createdAt: Date.now(),\n          updatedAt: Date.now(),\n        }\n        setSessions(prev => [newSession, ...prev])\n        sessionId = newSession.id\n        setCurrentSessionId(newSession.id)\n      } else {\n        // Update session title if it's the first message\n        const session = sessions.find(s => s.id === sessionId)\n        if (session && session.messages.length === 0) {\n          renameSession(sessionId, generateTitle(content))\n        }\n      }\n\n      // Add user message\n      const userMessage: Message = {\n        id: generateId(),\n        role: 'user',\n        content: content.trim(),\n        timestamp: Date.now(),\n      }\n\n      setSessions(prev =>\n        prev.map(s =>\n          s.id === sessionId\n            ? {\n                ...s,\n                messages: [...s.messages, userMessage],\n                updatedAt: Date.now(),\n              }\n            : s\n        )\n      )\n\n      // Prepare AI message\n      const aiMessageId = generateId()\n      const aiMessage: Message = {\n        id: aiMessageId,\n        role: 'assistant',\n        content: '',\n        timestamp: Date.now(),\n        isStreaming: true,\n      }\n\n      setSessions(prev =>\n        prev.map(s =>\n          s.id === sessionId\n            ? {\n                ...s,\n                messages: [...s.messages, aiMessage],\n                updatedAt: Date.now(),\n              }\n            : s\n        )\n      )\n\n      setIsLoading(true)\n\n      try {\n        // Get conversation history\n        const currentSession = sessions.find(s => s.id === sessionId)\n        const historyMessages = currentSession\n          ? currentSession.messages.slice(-10).map(m => ({\n              role: m.role,\n              content: m.content,\n            }))\n          : []\n\n        abortControllerRef.current = new AbortController()\n\n        await chatStream({\n          messages: [\n            ...historyMessages,\n            { role: 'user', content: content.trim() },\n          ],\n          temperature: 0.7,\n          maxTokens: 2000,\n          onStream: chunk => {\n            setSessions(prev =>\n              prev.map(s =>\n                s.id === sessionId\n                  ? {\n                      ...s,\n                      messages: s.messages.map(m =>\n                        m.id === aiMessageId\n                          ? { ...m, content: m.content + chunk }\n                          : m\n                      ),\n                    }\n                  : s\n              )\n            )\n          },\n        })\n      } catch (error) {\n        console.error('Chat error:', error)\n        // Add error message\n        setSessions(prev =>\n          prev.map(s =>\n            s.id === sessionId\n              ? {\n                  ...s,\n                  messages: s.messages.map(m =>\n                    m.id === aiMessageId\n                      ? {\n                          ...m,\n                          content:\n                            m.content +\n                            '\\n\\n[错误: 发送消息失败，请检查 API 配置或稍后重试]',\n                          isStreaming: false,\n                        }\n                      : m\n                  ),\n                }\n              : s\n          )\n        )\n      } finally {\n        setIsLoading(false)\n        abortControllerRef.current = null\n\n        // Mark streaming as complete\n        setSessions(prev =>\n          prev.map(s =>\n            s.id === sessionId\n              ? {\n                  ...s,\n                  messages: s.messages.map(m =>\n                    m.id === aiMessageId ? { ...m, isStreaming: false } : m\n                  ),\n                }\n              : s\n          )\n        )\n      }\n    },\n    [currentSessionId, isLoading, sessions, renameSession]\n  )\n\n  const regenerateMessage = useCallback(async () => {\n    if (!currentSession) return\n\n    // Find last user message\n    const lastUserMessageIndex = [...currentSession.messages]\n      .reverse()\n      .findIndex(m => m.role === 'user')\n\n    if (lastUserMessageIndex === -1) return\n\n    const actualIndex =\n      currentSession.messages.length - 1 - lastUserMessageIndex\n    const lastUserMessage = currentSession.messages[actualIndex]\n\n    // Remove AI messages after the last user message\n    setSessions(prev =>\n      prev.map(s =>\n        s.id === currentSessionId\n          ? {\n              ...s,\n              messages: s.messages.slice(0, actualIndex + 1),\n              updatedAt: Date.now(),\n            }\n          : s\n      )\n    )\n\n    // Resend\n    await sendMessage(lastUserMessage.content)\n  }, [currentSession, currentSessionId, sendMessage])\n\n  return (\n    <div className=\"min-h-screen bg-background flex flex-col\">\n      <Navigation />\n\n      <main className=\"flex-1 flex pt-16\">\n        {/* Sidebar - 粘性定位 */}\n        <div className=\"hidden lg:block w-72 flex-shrink-0\">\n          <div className=\"sticky top-16 h-[calc(100vh-4rem)]\">\n            <ChatSidebar\n              sessions={sessions}\n              currentSessionId={currentSessionId}\n              onNewChat={createNewSession}\n              onSelectSession={selectSession}\n              onDeleteSession={deleteSession}\n              onRenameSession={renameSession}\n              isDark={isDark}\n              isOpen={false}\n              onClose={() => {}}\n            />\n          </div>\n        </div>\n\n        {/* Mobile Sidebar - 只在移动端显示 */}\n        <div className=\"lg:hidden\">\n          <ChatSidebar\n            sessions={sessions}\n            currentSessionId={currentSessionId}\n            onNewChat={createNewSession}\n            onSelectSession={selectSession}\n            onDeleteSession={deleteSession}\n            onRenameSession={renameSession}\n            isDark={isDark}\n            isOpen={isSidebarOpen}\n            onClose={() => setIsSidebarOpen(false)}\n          />\n        </div>\n\n        {/* Main content */}\n        <div className=\"flex-1 flex flex-col min-w-0\">\n          {/* Header */}\n          <header\n            className={cn(\n              'flex items-center justify-between px-4 py-3 border-b lg:hidden',\n              isDark\n                ? 'border-zinc-800 bg-zinc-950'\n                : 'border-gray-200 bg-white'\n            )}\n          >\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => setIsSidebarOpen(true)}\n              className={isDark ? 'text-zinc-400' : 'text-gray-600'}\n            >\n              <Menu className=\"w-5 h-5\" />\n            </Button>\n            <div className=\"flex items-center gap-2\">\n              <Sparkles className=\"w-5 h-5 text-purple-500\" />\n              <h1\n                className={cn(\n                  'font-semibold',\n                  isDark ? 'text-zinc-100' : 'text-gray-900'\n                )}\n              >\n                {currentSession?.title || 'AI 助手'}\n              </h1>\n            </div>\n            <div className=\"w-10\" />\n          </header>\n\n          {/* Messages */}\n          <ScrollArea className=\"flex-1\">\n            {messages.length === 0 ? (\n              <EmptyState isDark={isDark} onSuggestionClick={sendMessage} />\n            ) : (\n              <div className=\"pb-4\">\n                {messages.map((message, index) => (\n                  <ChatMessage\n                    key={message.id}\n                    message={message}\n                    isDark={isDark}\n                    onRegenerate={\n                      index === messages.length - 1 &&\n                      message.role === 'assistant'\n                        ? regenerateMessage\n                        : undefined\n                    }\n                    isLastMessage={index === messages.length - 1}\n                  />\n                ))}\n                <div ref={messagesEndRef} />\n              </div>\n            )}\n          </ScrollArea>\n\n          {/* Input */}\n          <ChatInput\n            onSend={sendMessage}\n            isLoading={isLoading}\n            isDark={isDark}\n            onStop={stopGeneration}\n            placeholder=\"输入消息...\"\n          />\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  )\n}\n"],"names":["__iconNode","MessageSquare","createLucideIcon","Pen","Square","ChatSidebar","sessions","currentSessionId","onNewChat","onSelectSession","onDeleteSession","onRenameSession","isDark","isOpen","onClose","editingId","setEditingId","useState","editTitle","setEditTitle","handleStartEdit","useCallback","session","handleSaveEdit","sessionId","handleCancelEdit","formatDate","timestamp","date","now","isToday","isYesterday","jsxs","Fragment","jsx","cn","Button","Plus","ScrollArea","e","Check","X","Edit2","Trash2","ChatInput","onSend","isLoading","onStop","placeholder","message","setMessage","textareaRef","useRef","handleSend","trimmedMessage","handleKeyDown","handleInput","textarea","Send","suggestions","Code","Lightbulb","Sparkles","EmptyState","onSuggestionClick","motion","suggestion","index","STORAGE_KEY","CURRENT_SESSION_KEY","generateId","generateTitle","content","trimmed","AIChatPage","setIsDark","setSessions","saved","setCurrentSessionId","isSidebarOpen","setIsSidebarOpen","setIsLoading","abortControllerRef","messagesEndRef","useEffect","checkTheme","observer","currentSession","s","messages","_a","createNewSession","newSession","prev","selectSession","deleteSession","renameSession","newTitle","stopGeneration","m","sendMessage","userMessage","aiMessageId","aiMessage","historyMessages","chatStream","chunk","error","regenerateMessage","lastUserMessageIndex","actualIndex","lastUserMessage","Navigation","Menu","ChatMessage","Footer"],"mappings":"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","x_google_ignoreList":[0,1,2]}