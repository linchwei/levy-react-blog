import{j as e,m as b}from"./ui-8Or-2zOT-8Or-2zOT.js";import{r as m}from"./vendor-QyoG3HE1-QyoG3HE1.js";import{C as S,b as G,f as B,a as M,B as f}from"./index-CB-nuzdG-CB-nuzdG.js";import{B as T}from"./badge-BFIphGmu-BFIphGmu.js";import{T as H}from"./trophy-BpnV6Nd4-BpnV6Nd4.js";import{P as v}from"./play-DOGSkvdD-DOGSkvdD.js";import{R as P}from"./rotate-ccw-BgUc6dP3-BgUc6dP3.js";import{P as D}from"./pause-DzneUdnT-DzneUdnT.js";import{C as W}from"./chevron-left-DYM13oXh-DYM13oXh.js";import{C as Y}from"./chevron-right-BvmJQ-b5-BvmJQ-b5.js";import{N as O}from"./Navigation-CVIh0ny8-CVIh0ny8.js";import{F as _}from"./Footer-HVOx1zD2-HVOx1zD2.js";import{G as z}from"./gamepad-2-Bui3mMO4-Bui3mMO4.js";import{T as F}from"./target-BaO0FYrG-BaO0FYrG.js";import{Z as U}from"./zap-D85VQT3v-D85VQT3v.js";import"./animation-Cg-7L8ts-Cg-7L8ts.js";import"./input-BH5s_kIV-BH5s_kIV.js";import"./middleware-BIVXqGDk-BIVXqGDk.js";const p={canvasWidth:800,canvasHeight:600,ballRadius:8,paddleWidth:100,paddleHeight:15,brickRows:5,brickCols:8,brickPadding:10,brickOffsetTop:60,brickOffsetLeft:35},V=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6"],K=[50,40,30,20,10];function w(s=p){return{x:s.canvasWidth/2,y:s.canvasHeight-100,dx:4,dy:-4,radius:s.ballRadius,speed:5}}function L(s=p){return{x:(s.canvasWidth-s.paddleWidth)/2,y:s.canvasHeight-30,width:s.paddleWidth,height:s.paddleHeight,speed:8}}function C(s=1,r=p){const h=[],a=(r.canvasWidth-2*r.brickOffsetLeft-(r.brickCols-1)*r.brickPadding)/r.brickCols,x=20;for(let o=0;o<r.brickRows;o++)for(let l=0;l<r.brickCols;l++)h.push({x:r.brickOffsetLeft+l*(a+r.brickPadding),y:r.brickOffsetTop+o*(x+r.brickPadding),width:a,height:x,color:V[o]||"#3b82f6",points:K[o]||10,visible:!0});return h}function y(s=p){return{ball:w(s),paddle:L(s),bricks:C(1,s),score:0,lives:3,level:1,status:"IDLE",highScore:parseInt(localStorage.getItem("breakoutHighScore")||"0")}}function R(s,r,h=p){if(s.status!=="PLAYING")return s;const a=r==="LEFT"?s.paddle.x-s.paddle.speed:s.paddle.x+s.paddle.speed,x=Math.max(0,Math.min(a,h.canvasWidth-s.paddle.width));return{...s,paddle:{...s.paddle,x}}}function X(s,r){return r.visible?s.x+s.radius>r.x&&s.x-s.radius<r.x+r.width&&s.y+s.radius>r.y&&s.y-s.radius<r.y+r.height:!1}function Z(s,r){return s.x+s.radius>r.x&&s.x-s.radius<r.x+r.width&&s.y+s.radius>r.y&&s.y-s.radius<r.y+r.height}function q(s,r=p){const{ball:h,paddle:a,bricks:x,score:o,lives:l}=s;let i={...h},u=[...x],g=o,j=l;if(i.x+=i.dx,i.y+=i.dy,(i.x+i.radius>r.canvasWidth||i.x-i.radius<0)&&(i.dx=-i.dx),i.y-i.radius<0&&(i.dy=-i.dy),i.y+i.radius>r.canvasHeight){if(j--,j<=0){const c=Math.max(o,s.highScore);return localStorage.setItem("breakoutHighScore",c.toString()),{...s,lives:0,status:"GAME_OVER",highScore:c}}i=w(r)}if(Z(i,a)){const d=(i.x-(a.x+a.width/2))/(a.width/2)*(Math.PI/3),t=Math.sqrt(i.dx*i.dx+i.dy*i.dy);i.dx=t*Math.sin(d),i.dy=-Math.abs(t*Math.cos(d))}for(let c=0;c<u.length;c++)if(X(i,u[c])){u[c]={...u[c],visible:!1},g+=u[c].points,i.dy=-i.dy;break}if(u.filter(c=>c.visible).length===0){const c=s.level+1;return{...s,ball:w(r),paddle:L(r),bricks:C(c,r),score:g,level:c}}return{...s,ball:i,bricks:u,score:g,lives:j}}function J(s){return s.status!=="PLAYING"?s:q(s)}function Q(s){return s.status==="PLAYING"?s:s.status==="GAME_OVER"?{...y(),status:"PLAYING",highScore:s.highScore}:{...s,status:"PLAYING"}}function $(s){return s.status!=="PLAYING"?s:{...s,status:"PAUSED"}}function ee(s){return s.status!=="PAUSED"?s:{...s,status:"PLAYING"}}function E(s){return{...y(),highScore:s.highScore}}function A(s){return s.status==="PLAYING"?$(s):s.status==="PAUSED"?ee(s):s}function se({onScoreChange:s,onGameOver:r}){const h=m.useRef(null),[a,x]=m.useState(()=>y()),o=m.useRef(null),l=m.useRef({left:!1,right:!1}),i=p.canvasWidth,u=p.canvasHeight,g=m.useCallback(()=>{const d=h.current;if(!d)return;const t=d.getContext("2d");if(t){t.fillStyle="#1a1a2e",t.fillRect(0,0,i,u),a.bricks.forEach(n=>{n.visible&&(t.fillStyle=n.color,t.shadowColor=n.color,t.shadowBlur=5,t.fillRect(n.x,n.y,n.width,n.height),t.shadowBlur=0,t.strokeStyle="rgba(0,0,0,0.2)",t.lineWidth=2,t.strokeRect(n.x,n.y,n.width,n.height))}),t.fillStyle="#60a5fa",t.shadowColor="#60a5fa",t.shadowBlur=10,t.fillRect(a.paddle.x,a.paddle.y,a.paddle.width,a.paddle.height),t.shadowBlur=0,t.beginPath(),t.arc(a.ball.x,a.ball.y,a.ball.radius,0,Math.PI*2),t.fillStyle="#fbbf24",t.shadowColor="#fbbf24",t.shadowBlur=10,t.fill(),t.closePath(),t.shadowBlur=0;for(let n=0;n<a.lives;n++){const N=20+n*30,I=30;t.fillStyle="#ef4444",t.font="20px Arial",t.fillText("â¤ï¸",N,I)}}},[a,i,u]);m.useEffect(()=>(a.status==="PLAYING"?o.current=setInterval(()=>{x(d=>{let t=d;return l.current.left&&(t=R(t,"LEFT")),l.current.right&&(t=R(t,"RIGHT")),t=J(t),t.score!==d.score&&(s==null||s(t.score)),t.status==="GAME_OVER"&&d.status!=="GAME_OVER"&&(r==null||r(t.score)),t})},1e3/60):o.current&&(clearInterval(o.current),o.current=null),()=>{o.current&&clearInterval(o.current)}),[a.status,s,r]),m.useEffect(()=>{g()},[g]),m.useEffect(()=>{const d=n=>{switch(n.key){case"ArrowLeft":case"a":case"A":l.current.left=!0;break;case"ArrowRight":case"d":case"D":l.current.right=!0;break;case" ":n.preventDefault(),x(N=>A(N));break;case"r":case"R":x(N=>E(N));break}},t=n=>{switch(n.key){case"ArrowLeft":case"a":case"A":l.current.left=!1;break;case"ArrowRight":case"d":case"D":l.current.right=!1;break}};return window.addEventListener("keydown",d),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",t)}},[]);const j=()=>{x(d=>Q(d))},k=()=>{x(d=>E(d))},c=()=>{x(d=>A(d))};return e.jsxs(S,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(G,{className:"flex flex-row items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“"}),"æ‰“ç –å—"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(T,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),"æœ€é«˜åˆ†: ",a.highScore]})})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"å½“å‰åˆ†æ•°"}),e.jsx("p",{className:"text-2xl font-bold",children:a.score})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ç­‰çº§"}),e.jsx("p",{className:"text-2xl font-bold",children:a.level})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ç”Ÿå‘½"}),e.jsx("p",{className:"text-2xl font-bold",children:a.lives})]})]}),e.jsx("div",{className:"relative flex justify-center",children:e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"relative",children:[e.jsx("canvas",{ref:h,width:i,height:u,className:"border-2 border-border rounded-lg max-w-full h-auto",style:{imageRendering:"pixelated"}}),a.status!=="PLAYING"&&e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center bg-background/80 rounded-lg",children:[a.status==="IDLE"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:"å‡†å¤‡å¥½äº†å—ï¼Ÿ"}),e.jsxs(f,{onClick:j,size:"lg",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"å¼€å§‹æ¸¸æˆ"]})]}),a.status==="PAUSED"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-medium mb-4",children:"æ¸¸æˆæš‚åœ"}),e.jsxs(f,{onClick:c,size:"lg",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"ç»§ç»­æ¸¸æˆ"]})]}),a.status==="GAME_OVER"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold text-destructive mb-2",children:"æ¸¸æˆç»“æŸ"}),e.jsxs("p",{className:"text-lg mb-4",children:["æœ€ç»ˆå¾—åˆ†: ",a.score]}),e.jsxs(f,{onClick:j,size:"lg",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"å†æ¥ä¸€å±€"]})]})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[a.status==="PLAYING"?e.jsxs(f,{variant:"outline",onClick:c,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"æš‚åœ"]}):e.jsxs(f,{onClick:j,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),a.status==="GAME_OVER"?"å†æ¥ä¸€å±€":"å¼€å§‹"]}),e.jsxs(f,{variant:"outline",onClick:k,children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"é‡ç½®"]})]}),e.jsxs("div",{className:"flex justify-center gap-4 md:hidden",children:[e.jsx(f,{variant:"outline",size:"icon",onMouseDown:()=>l.current.left=!0,onMouseUp:()=>l.current.left=!1,onTouchStart:()=>l.current.left=!0,onTouchEnd:()=>l.current.left=!1,disabled:a.status!=="PLAYING",children:e.jsx(W,{className:"w-6 h-6"})}),e.jsx(f,{variant:"outline",size:"icon",onMouseDown:()=>l.current.right=!0,onMouseUp:()=>l.current.right=!1,onTouchStart:()=>l.current.right=!0,onTouchEnd:()=>l.current.right=!1,disabled:a.status!=="PLAYING",children:e.jsx(Y,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[e.jsx("p",{children:"æ“ä½œ: â†â†’ æˆ– A/D ç§»åŠ¨æŒ¡æ¿ | ç©ºæ ¼ æš‚åœ | R é‡ç½®"}),e.jsx("p",{className:"mt-1",children:"ç›®æ ‡: æ¶ˆé™¤æ‰€æœ‰ç –å—"})]})]})]})}function be(){return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(O,{}),e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex-1 pt-16",children:[e.jsxs("section",{className:"relative py-12 px-4 sm:px-6 lg:px-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full bg-gradient-to-b from-red-500/5 to-transparent rounded-full blur-3xl"})}),e.jsxs("div",{className:"relative max-w-7xl mx-auto text-center",children:[e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-500/10 mb-6",children:e.jsx(z,{className:"w-8 h-8 text-red-500"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold tracking-tight mb-4",children:e.jsx("span",{className:"bg-gradient-to-r from-red-500 to-rose-500 bg-clip-text text-transparent",children:"æ‰“ç –å—"})}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"ç»å…¸è¡—æœºæ¸¸æˆï¼Œæ§åˆ¶æŒ¡æ¿åå¼¹çƒï¼Œå‡»ç¢æ‰€æœ‰ç –å—ï¼"})]}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-8 flex justify-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{children:"ç›®æ ‡ï¼šæ¶ˆé™¤æ‰€æœ‰ç –å—"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"æ— é™å…³å¡æŒ‘æˆ˜"})]})]})]})]}),e.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(se,{})})}),e.jsx("section",{className:"py-12 px-4 sm:px-6 lg:px-8 bg-muted/30",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"æ¸¸æˆæŠ€å·§"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ¯"}),e.jsx("h3",{className:"font-semibold mb-2",children:"æ§åˆ¶è§’åº¦"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"çƒå‡»ä¸­æŒ¡æ¿ä¸åŒä½ç½®ä¼šæ”¹å˜åå¼¹è§’åº¦ï¼Œåˆ©ç”¨è¿™ç‚¹æ§åˆ¶çƒçš„æ–¹å‘"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"âš¡"}),e.jsx("h3",{className:"font-semibold mb-2",children:"ä¼˜å…ˆæ¶ˆé™¤"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ä¼˜å…ˆå‡»ç¢ä¸Šæ–¹çš„ç –å—ï¼Œé¿å…çƒæ‰è½æ—¶æ¥ä¸åŠååº”"})]}),e.jsxs("div",{className:"p-6 rounded-xl bg-background border border-border/50",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ğŸ›¡ï¸"}),e.jsx("h3",{className:"font-semibold mb-2",children:"ä¿æŠ¤ç”Ÿå‘½"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"æ³¨æ„çƒçš„é€Ÿåº¦å’Œè½¨è¿¹ï¼Œæå‰ç§»åŠ¨æŒ¡æ¿åˆ°åˆé€‚ä½ç½®"})]})]})]})})]}),e.jsx(_,{})]})}export{be as BreakoutPage};
//# sourceMappingURL=BreakoutPage-BH9Jp_Jz-BH9Jp_Jz.js.map
