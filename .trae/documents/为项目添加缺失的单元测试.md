## 📋 单元测试添加计划

### 已完成测试的模块 ✅
所有10个游戏都已经有了完整的单元测试：
1. ✅ 贪吃蛇 (snake) - 41个测试
2. ✅ 俄罗斯方块 (tetris) - 55个测试
3. ✅ 2048 (game2048) - 42个测试
4. ✅ 记忆翻牌 (memory) - 33个测试
5. ✅ 打砖块 (breakout) - 47个测试
6. ✅ 扫雷 (minesweeper) - 33个测试
7. ✅ 五子棋 (gomoku) - 40个测试
8. ✅ 飞机大战 (aircraft) - 33个测试
9. ✅ 数字华容道 (klotski) - 29个测试
10. ✅ 弹球 (pinball) - 37个测试

**当前总计：390个测试**

---

### 需要添加测试的模块 📌

#### 第一阶段：工具函数 (1个文件)
| 模块 | 文件路径 | 测试内容 |
|------|----------|----------|
| utils | `src/lib/utils.ts` | cn函数（类名合并）、日期格式化等 |

#### 第二阶段：自定义 Hooks (8个文件)
| 模块 | 文件路径 | 测试内容 |
|------|----------|----------|
| useLocalStorage | `src/hooks/useLocalStorage.ts` | 本地存储读写、JSON序列化 |
| useDebounce | `src/hooks/useDebounce.ts` | 防抖功能、延迟执行 |
| usePrevious | `src/hooks/usePrevious.ts` | 前一个值追踪 |
| useAnimation | `src/hooks/useAnimation.ts` | 动画帧控制、生命周期 |
| useTrendingRepos | `src/hooks/useTrendingRepos.ts` | API调用、数据处理 |
| useArticleSummary | `src/hooks/useArticleSummary.ts` | 文章摘要生成 |
| useAIChat | `src/hooks/useAIChat.ts` | AI对话管理 |

#### 第三阶段：数据模块 (2个文件)
| 模块 | 文件路径 | 测试内容 |
|------|----------|----------|
| galleryData | `src/components/gallery/galleryData.ts` | 画廊数据结构验证 |
| certificationData | `src/components/certifications/certificationData.ts` | 证书数据验证 |

---

### 实施步骤

**步骤1：添加 utils 测试**
- 创建 `src/lib/utils.test.ts`
- 测试 cn 函数的类名合并逻辑
- 测试日期格式化函数

**步骤2：添加 Hooks 测试**
- 使用 React Testing Library 测试 hooks
- 创建 `src/hooks/__tests__/useLocalStorage.test.ts` 等
- 模拟 localStorage、定时器等浏览器API

**步骤3：添加数据模块测试**
- 创建 `src/components/gallery/galleryData.test.ts`
- 创建 `src/components/certifications/certificationData.test.ts`
- 验证数据结构的完整性和正确性

---

### 预期结果
- **新增测试数量**：约 50-80 个测试用例
- **总测试数量**：约 440-470 个测试
- **测试覆盖率**：显著提升工具函数和hooks的覆盖率

---

请确认这个计划后，我将开始逐步实施。